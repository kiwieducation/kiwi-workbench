{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/katewang/Desktop/kiwi-workbench/app/%28protected%29/ProtectedLayoutClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProtectedLayoutClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProtectedLayoutClient() from the server but ProtectedLayoutClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(protected)/ProtectedLayoutClient.tsx <module evaluation>\",\n    \"ProtectedLayoutClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,2EACA","ignoreList":[0]}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/katewang/Desktop/kiwi-workbench/app/%28protected%29/ProtectedLayoutClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProtectedLayoutClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProtectedLayoutClient() from the server but ProtectedLayoutClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/(protected)/ProtectedLayoutClient.tsx\",\n    \"ProtectedLayoutClient\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,uDACA","ignoreList":[0]}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/katewang/Desktop/kiwi-workbench/app/%28protected%29/layout.tsx"],"sourcesContent":["import { cookies } from 'next/headers'\nimport { createServerClient, type CookieOptions } from '@supabase/ssr'\nimport { redirect } from 'next/navigation'\nimport { ProtectedLayoutClient } from './ProtectedLayoutClient'\n\n/**\n * 受保护路由组布局\n * \n * 功能：\n * 1. 服务端验证用户登录状态\n * 2. 客户端渲染 Shell + Providers\n * \n * ⚠️ 安全约束（冻结）：\n * - 使用 Anon Key + Cookies\n * - 不使用 Service Role Key\n */\nexport default async function ProtectedLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const cookieStore = await cookies()\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        },\n        set(name: string, value: string, options: CookieOptions) {\n          // Server Component 中不能设置 cookies\n        },\n        remove(name: string, options: CookieOptions) {\n          // Server Component 中不能删除 cookies\n        },\n      },\n    }\n  )\n\n  // 验证登录状态\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  // 未登录则重定向到登录页\n  if (!user) {\n    redirect('/login')\n  }\n\n  // 渲染客户端布局（包含 Providers）\n  return <ProtectedLayoutClient>{children}</ProtectedLayoutClient>\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;;;;;;AAae,eAAe,gBAAgB,EAC5C,QAAQ,EAGT;IACC,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,MAAM,WAAW,IAAA,yLAAkB,sUAGjC;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;YACrD,iCAAiC;YACnC;YACA,QAAO,IAAY,EAAE,OAAsB;YACzC,iCAAiC;YACnC;QACF;IACF;IAGF,SAAS;IACT,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,cAAc;IACd,IAAI,CAAC,MAAM;QACT,IAAA,iMAAQ,EAAC;IACX;IAEA,wBAAwB;IACxB,qBAAO,8OAAC,uKAAqB;kBAAE;;;;;;AACjC"}}]
}