{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/lock.ts","../../../../node_modules/lucide-react/src/icons/file-text.ts","../../../../lib/services/conversation.service.ts","../../../../node_modules/lucide-react/src/icons/external-link.ts","../../../../node_modules/lucide-react/src/icons/refresh-cw.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Lock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTEiIHg9IjMiIHk9IjExIiByeD0iMiIgcnk9IjIiIC8+CiAgPHBhdGggZD0iTTcgMTFWN2E1IDUgMCAwIDEgMTAgMHY0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/lock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lock = createLucideIcon('Lock', [\n  ['rect', { width: '18', height: '11', x: '3', y: '11', rx: '2', ry: '2', key: '1w4ew1' }],\n  ['path', { d: 'M7 11V7a5 5 0 0 1 10 0v4', key: 'fwvmzm' }],\n]);\n\nexport default Lock;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FileText\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjdaIiAvPgogIDxwYXRoIGQ9Ik0xNCAydjRhMiAyIDAgMCAwIDIgMmg0IiAvPgogIDxwYXRoIGQ9Ik0xMCA5SDgiIC8+CiAgPHBhdGggZD0iTTE2IDEzSDgiIC8+CiAgPHBhdGggZD0iTTE2IDE3SDgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/file-text\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileText = createLucideIcon('FileText', [\n  ['path', { d: 'M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z', key: '1rqfz7' }],\n  ['path', { d: 'M14 2v4a2 2 0 0 0 2 2h4', key: 'tnqrlb' }],\n  ['path', { d: 'M10 9H8', key: 'b1mrlr' }],\n  ['path', { d: 'M16 13H8', key: 't4e002' }],\n  ['path', { d: 'M16 17H8', key: 'z1uh3a' }],\n]);\n\nexport default FileText;\n","/**\n * 会话中心数据服务层\n * \n * 负责获取企业微信会话数据\n * 从 Supabase wechat_messages 表聚合会话列表\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport { createServiceError, success, failure, type ServiceResult } from '@/components/shared/Toast'\nimport type {\n  Conversation,\n  Message,\n  AIAnalysis,\n  MarketingMaterial,\n  ConversationType,\n  MessageType,\n} from '@/types/entities'\n\n// ============================================\n// Mock 数据（开发模式 fallback）\n// ============================================\n\nconst ENABLE_MOCK_FALLBACK = process.env.NODE_ENV === 'development'\n\nconst mockConversations: Conversation[] = [\n  {\n    id: 'conv-001',\n    name: 'Emily Zhang',\n    type: 'student',\n    lastMessage: '老师，我的文书进度怎么样了？',\n    lastMessageTime: '10:30',\n    unreadCount: 2,\n    isOverdue: false,\n    clientStatus: 'signed',\n    tags: ['VIP', '美本'],\n    grade: '高二',\n    serviceProject: '美本申请',\n    serviceStage: '文书准备',\n    serviceProgress: 65,\n    riskStatus: 'normal',\n    nextKeyNode: { label: 'ED截止', date: '2024-11-01' },\n    lastFollowUp: '2024-10-24',\n    contractDate: '2024-09-20',\n    joinDate: '2024-09-15',\n    serviceTeam: { consultant: 'Sarah Wu', leadTutor: 'Dr. Mike Ross' },\n  },\n  {\n    id: 'conv-002',\n    name: 'Mr. Li (Michael父亲)',\n    type: 'parent',\n    lastMessage: '麻烦老师多关注一下孩子的申请进度',\n    lastMessageTime: '昨天',\n    unreadCount: 0,\n    isOverdue: true,\n    tags: ['家长', '高意向'],\n    grade: '高三',\n  },\n  {\n    id: 'conv-003',\n    name: '销售团队群',\n    type: 'group',\n    lastMessage: '[Alex]: 今天的签约目标完成了吗？',\n    lastMessageTime: '09:15',\n    unreadCount: 5,\n    isOverdue: false,\n  },\n]\n\nconst mockMessages: Message[] = [\n  {\n    id: 'msg-001',\n    conversationId: 'conv-001',\n    senderName: 'Emily Zhang',\n    senderId: 'user-emily',\n    content: '老师，我的文书进度怎么样了？',\n    timestamp: '10:30',\n    isMe: false,\n    type: 'text',\n  },\n  {\n    id: 'msg-002',\n    conversationId: 'conv-001',\n    senderName: 'Sarah Wu',\n    senderId: 'user-sarah',\n    content: 'Emily同学好！你的文书初稿已经完成了，正在做最后的润色。预计明天可以发给你review。',\n    timestamp: '10:32',\n    isMe: true,\n    type: 'text',\n  },\n]\n\nconst mockAIAnalysis: AIAnalysis = {\n  intent: '询问服务进度',\n  emotion: '略有焦虑',\n  strategy: '及时反馈具体进度，给出明确时间节点',\n  suggestedReplies: [\n    '您好！您的文书初稿已经完成约85%，预计明天下午可以发送给您review。',\n    '感谢您的关注！目前文书正在做最后的润色，我会在今天内给您一个详细的进度更新。',\n  ],\n}\n\nconst mockMaterials: MarketingMaterial[] = [\n  {\n    id: 'mat-001',\n    title: '2024美本申请趋势解读',\n    type: 'article',\n    source: '公众号',\n    date: '2024-10-20',\n    summary: '今年美本申请有这些新变化...',\n  },\n  {\n    id: 'mat-002',\n    title: '文书写作避坑指南',\n    type: 'video',\n    source: '视频号',\n    date: '2024-10-18',\n    summary: '分享这个视频给正在准备文书的学生',\n  },\n]\n\n// ============================================\n// 服务函数\n// ============================================\n\n/**\n * 获取会话列表（聚合）\n * \n * 从 wechat_messages 表按 room_id 或 from/to 组合聚合\n */\nexport async function getConversationList(options?: {\n  page?: number\n  pageSize?: number\n  type?: ConversationType | 'all'\n}): Promise<ServiceResult<{ data: Conversation[]; total: number }>> {\n  const supabase = createClient()\n  const { page = 1, pageSize = 50, type } = options || {}\n\n  try {\n    // 尝试从 wechat_messages 聚合会话\n    const { data: roomData, error: roomError } = await supabase\n      .from('wechat_messages')\n      .select('room_id, from_user_id, to_user_id, content, send_time, msg_type')\n      .order('send_time', { ascending: false })\n      .limit(500)\n\n    if (roomError) {\n      console.error('Supabase wechat_messages query failed:', roomError.message)\n\n      if (roomError.code === '42P01' || roomError.message.includes('does not exist')) {\n        if (ENABLE_MOCK_FALLBACK) {\n          console.warn('[DEV] Using mock conversations (table not exists)')\n          return success({ data: filterByType(mockConversations, type), total: mockConversations.length })\n        }\n        return failure({\n          code: 'TABLE_NOT_EXISTS',\n          message: '企业微信消息表不存在，请联系管理员创建 wechat_messages 表',\n        })\n      }\n\n      if (roomError.code === '42501' || roomError.message.includes('permission denied')) {\n        return failure({\n          code: 'PERMISSION_DENIED',\n          message: '没有访问企业微信消息的权限',\n        })\n      }\n\n      if (ENABLE_MOCK_FALLBACK) {\n        return success({ data: filterByType(mockConversations, type), total: mockConversations.length })\n      }\n\n      return failure(createServiceError(roomError, '获取会话列表失败'))\n    }\n\n    // 聚合会话\n    const conversations = aggregateConversations(roomData || [])\n\n    // 筛选类型\n    const filtered = filterByType(conversations, type)\n\n    // 分页\n    const startIdx = (page - 1) * pageSize\n    const paged = filtered.slice(startIdx, startIdx + pageSize)\n\n    return success({ data: paged, total: filtered.length })\n  } catch (error) {\n    console.error('getConversationList error:', error)\n    if (ENABLE_MOCK_FALLBACK) {\n      return success({ data: filterByType(mockConversations, type), total: mockConversations.length })\n    }\n    return failure(createServiceError(error, '获取会话列表失败'))\n  }\n}\n\n/**\n * 获取会话消息列表（分页）\n */\nexport async function getConversationMessages(\n  conversationId: string,\n  options?: { limit?: number; before?: string }\n): Promise<ServiceResult<{ data: Message[]; hasMore: boolean }>> {\n  const supabase = createClient()\n  const { limit = 50, before } = options || {}\n\n  try {\n    let query = supabase\n      .from('wechat_messages')\n      .select('*')\n      .order('send_time', { ascending: false })\n      .limit(limit + 1)\n\n    // 解析 conversationId\n    if (conversationId.startsWith('room_')) {\n      const roomId = conversationId.replace('room_', '')\n      query = query.eq('room_id', roomId)\n    } else if (conversationId.startsWith('dm_')) {\n      const parts = conversationId.replace('dm_', '').split('_')\n      if (parts.length >= 2) {\n        query = query.or(`and(from_user_id.eq.${parts[0]},to_user_id.eq.${parts[1]}),and(from_user_id.eq.${parts[1]},to_user_id.eq.${parts[0]})`)\n      }\n    } else {\n      // Mock conversation ID\n      if (ENABLE_MOCK_FALLBACK) {\n        const filtered = mockMessages.filter(m => m.conversationId === conversationId)\n        return success({ data: filtered, hasMore: false })\n      }\n    }\n\n    if (before) {\n      query = query.lt('send_time', before)\n    }\n\n    const { data, error } = await query\n\n    if (error) {\n      console.error('Supabase messages query failed:', error.message)\n\n      if (ENABLE_MOCK_FALLBACK) {\n        const filtered = mockMessages.filter(m => m.conversationId === conversationId)\n        return success({ data: filtered, hasMore: false })\n      }\n\n      return failure(createServiceError(error, '获取消息列表失败'))\n    }\n\n    const hasMore = (data?.length || 0) > limit\n    const messages = (data || []).slice(0, limit).map(transformMessage)\n\n    return success({ data: messages.reverse(), hasMore })\n  } catch (error) {\n    console.error('getConversationMessages error:', error)\n    if (ENABLE_MOCK_FALLBACK) {\n      return success({ data: mockMessages, hasMore: false })\n    }\n    return failure(createServiceError(error, '获取消息列表失败'))\n  }\n}\n\n/**\n * 获取单个会话详情\n */\nexport async function getConversationById(id: string): Promise<ServiceResult<Conversation | null>> {\n  const result = await getConversationList({ pageSize: 100 })\n  if (!result.success) return failure(result.error)\n\n  const conversation = result.data.data.find(c => c.id === id)\n  return success(conversation || null)\n}\n\n/**\n * 获取 AI 分析（Mock）\n */\nexport async function getAIAnalysis(conversationId: string): Promise<ServiceResult<AIAnalysis | null>> {\n  // TODO: 接入实际 AI 分析服务\n  return success(mockAIAnalysis)\n}\n\n/**\n * 获取营销素材（Mock）\n */\nexport async function getMarketingMaterials(): Promise<ServiceResult<MarketingMaterial[]>> {\n  // TODO: 从 Supabase 获取营销素材\n  return success(mockMaterials)\n}\n\n/**\n * 获取未读会话数\n */\nexport async function getUnreadConversationsCount(): Promise<ServiceResult<number>> {\n  const result = await getConversationList({ pageSize: 100 })\n  if (!result.success) return failure(result.error)\n\n  const unread = result.data.data.filter(c => c.unreadCount > 0).length\n  return success(unread)\n}\n\n// ============================================\n// 兼容旧接口\n// ============================================\n\nexport async function getConversations(filter?: ConversationType | 'all'): Promise<Conversation[]> {\n  const result = await getConversationList({ type: filter, pageSize: 100 })\n  return result.success ? result.data.data : []\n}\n\nexport async function getMessages(conversationId: string): Promise<Message[]> {\n  const result = await getConversationMessages(conversationId)\n  return result.success ? result.data.data : []\n}\n\n// ============================================\n// 辅助函数\n// ============================================\n\ninterface DBMessage {\n  id: string\n  msg_id: string\n  from_user_id: string\n  to_user_id: string | null\n  room_id: string | null\n  msg_type: string\n  content: Record<string, unknown> | string\n  send_time: string\n  synced_at: string\n  created_at: string\n}\n\nfunction filterByType(conversations: Conversation[], type?: ConversationType | 'all'): Conversation[] {\n  if (!type || type === 'all') return conversations\n  if (type === 'internal') {\n    return conversations.filter(c => c.type === 'internal' || c.type === 'group')\n  }\n  return conversations.filter(c => c.type === type)\n}\n\nfunction aggregateConversations(messages: Partial<DBMessage>[]): Conversation[] {\n  const conversationMap = new Map<string, {\n    id: string\n    lastMessage: Partial<DBMessage>\n    messageCount: number\n  }>()\n\n  messages.forEach(msg => {\n    let convId: string\n    let convType: ConversationType = 'student'\n\n    if (msg.room_id) {\n      convId = `room_${msg.room_id}`\n      convType = 'group'\n    } else if (msg.from_user_id && msg.to_user_id) {\n      const sorted = [msg.from_user_id, msg.to_user_id].sort()\n      convId = `dm_${sorted[0]}_${sorted[1]}`\n    } else {\n      convId = `msg_${msg.from_user_id || 'unknown'}`\n    }\n\n    const existing = conversationMap.get(convId)\n    if (!existing || new Date(msg.send_time || '') > new Date(existing.lastMessage.send_time || '')) {\n      conversationMap.set(convId, {\n        id: convId,\n        lastMessage: msg,\n        messageCount: (existing?.messageCount || 0) + 1,\n      })\n    } else if (existing) {\n      existing.messageCount++\n    }\n  })\n\n  return Array.from(conversationMap.values()).map(conv => {\n    const msg = conv.lastMessage\n    const content = extractTextContent(msg.content)\n\n    return {\n      id: conv.id,\n      name: msg.room_id ? `群聊 ${msg.room_id.slice(0, 8)}` : `用户 ${msg.from_user_id?.slice(0, 8) || 'Unknown'}`,\n      type: (msg.room_id ? 'group' : 'student') as ConversationType,\n      lastMessage: content.slice(0, 50) + (content.length > 50 ? '...' : ''),\n      lastMessageTime: formatMessageTime(msg.send_time || ''),\n      unreadCount: 0,\n      isOverdue: false,\n    }\n  })\n}\n\nfunction transformMessage(data: DBMessage): Message {\n  return {\n    id: data.id,\n    conversationId: data.room_id ? `room_${data.room_id}` : `dm_${data.from_user_id}_${data.to_user_id}`,\n    senderName: data.from_user_id?.slice(0, 8) || 'Unknown',\n    senderId: data.from_user_id,\n    content: extractTextContent(data.content),\n    timestamp: formatMessageTime(data.send_time),\n    isMe: false,\n    type: mapMessageType(data.msg_type),\n  }\n}\n\nfunction extractTextContent(content: Record<string, unknown> | string | null | undefined): string {\n  if (!content) return '[空消息]'\n  if (typeof content === 'string') return content\n\n  if (content.text) return String(content.text)\n  if (content.content) return String(content.content)\n  if (content.message) return String(content.message)\n\n  const msgType = content.msgtype || content.type\n  switch (msgType) {\n    case 'image': return '[图片]'\n    case 'voice': return '[语音]'\n    case 'video': return '[视频]'\n    case 'file': return '[文件]'\n    case 'link': return '[链接]'\n    case 'miniprogram': return '[小程序]'\n    case 'location': return '[位置]'\n    default: return '[消息]'\n  }\n}\n\nfunction mapMessageType(type: string): MessageType {\n  switch (type?.toLowerCase()) {\n    case 'text': return 'text'\n    case 'image': return 'image'\n    case 'voice': return 'voice'\n    case 'video': return 'video'\n    case 'file': return 'file'\n    case 'link': return 'link'\n    default: return 'text'\n  }\n}\n\nfunction formatMessageTime(timeStr: string): string {\n  if (!timeStr) return ''\n\n  try {\n    const date = new Date(timeStr)\n    const now = new Date()\n    const diff = now.getTime() - date.getTime()\n\n    const minutes = Math.floor(diff / 60000)\n    const hours = Math.floor(diff / 3600000)\n    const days = Math.floor(diff / 86400000)\n\n    if (minutes < 1) return '刚刚'\n    if (minutes < 60) return `${minutes}分钟前`\n    if (hours < 24) return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })\n    if (days === 1) return '昨天'\n    if (days < 7) return `${days}天前`\n    return date.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' })\n  } catch {\n    return timeStr\n  }\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('ExternalLink', [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n]);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name RefreshCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDEgOS05IDkuNzUgOS43NSAwIDAgMSA2Ljc0IDIuNzRMMjEgOCIgLz4KICA8cGF0aCBkPSJNMjEgM3Y1aC01IiAvPgogIDxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIgLz4KICA8cGF0aCBkPSJNOCAxNkgzdjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/refresh-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCw = createLucideIcon('RefreshCw', [\n  ['path', { d: 'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8', key: 'v9h5vc' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n  ['path', { d: 'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16', key: '3uifl3' }],\n  ['path', { d: 'M8 16H3v5', key: '1cv678' }],\n]);\n\nexport default RefreshCw;\n"],"names":[],"mappings":"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CAAA,CAAA,sHAEC,CAAA,AACpF,QAAS,CAAA,AAAE,EAAG,CAAa,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAK,AAAL,QAAK,CAAU,CAAA,CAC3C,CAAA,CAAA,+BDLK,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,ADAA,CAAA,ACAA,ADAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,AAAe,CCAf,ADAA,CCAA,ADAA,AAAe,CCAf,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,GAAe,EAAiB,QCAU,CAAA,MDAM,CAAA,AACpD,CAAC,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAQ,ADAA,CCAA,ADAA,CAAA,ACAA,ADAE,EAAG,CCAsD,ADAzC,CCAyC,ADAzC,CCAyC,ADAzC,CAAA,ACAyC,CDAzC,ACAyC,CAAA,ADAzC,CCAyC,ADAzC,CCAyC,ADAzC,CAAA,ACAyC,CDAzC,ACAyC,CAAA,ADAzC,CAAA,ACAyC,ADAzC,CAAA,ACAyC,CAAA,ADAzC,CCAyC,ADAzC,CCAyC,ADAzC,AAAK,CCAoC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EDA1B,CCA0B,ADA1B,AAC1C,CCDoE,ADCnE,CCDmE,ADCnE,ACAA,CADmE,AACnE,ADAA,CCDmE,AACnE,ADAA,CCDmE,AACnE,ADAA,CCDmE,AACnE,ADAA,CCDmE,AAC3D,ADAA,CCAA,AAD2D,ADC3D,CCD2D,ADC3D,ACAA,CAD2D,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EDCvC,CCAD,ADAC,CCAD,ADAC,CAAA,ACAD,CDAM,UAAU,CAAA,AAC5C,CAAC,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAQ,ACAA,CDAA,ACAA,CDAE,EAAG,CCAuD,ADAK,CAAA,ACAL,CAAA,ADAK,CAAA,ACAL,CDAK,ACAL,CAAA,ADAK,CCAL,ADAK,CAAA,ACAL,CAAA,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CAAA,ACAL,CDAK,ACAL,CAAA,ADAK,CCAL,ADAK,CAAA,ACAL,CAAA,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CAAA,ACAL,CAAA,ADAK,CCAL,ADAK,CCAL,ADAK,CAAA,ACAL,CAAA,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CAAA,ACAL,CDAK,ACAL,CAAA,ADAK,CCAL,ADAK,CAAA,ACAL,CDAK,ACAL,CAAA,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CAAA,ACAL,CAAA,ADAK,CAAA,ACAL,CAAA,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,CCAL,ADAK,KAAA,CAAA,CAAA,CAAA,CAAA,AAAK,UAAU,CAC1F","ignoreList":[0,1,3,4]}