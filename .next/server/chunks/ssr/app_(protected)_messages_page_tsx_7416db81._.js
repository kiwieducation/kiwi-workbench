module.exports=[28e3,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(92e3),f=a.i(54161),g=a.i(7706);let h=[{key:"all",label:"全部"},{key:"student",label:"学生"},{key:"parent",label:"家长"},{key:"internal",label:"内部"}];function i({conversations:a,selectedId:c,onSelect:e,filter:g,onFilterChange:i,searchQuery:k,onSearchChange:l}){return(0,b.jsxs)("div",{className:"w-80 border-r border-slate-200 flex flex-col bg-slate-50/50",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-slate-200 space-y-3",children:[(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:h.map(a=>(0,b.jsx)(f.Badge,{variant:g===a.key?"default":"outline",className:"cursor-pointer whitespace-nowrap",onClick:()=>i(a.key),children:a.label},a.key))}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:14}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value),placeholder:"搜索会话...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500 bg-white"})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[a.map(a=>(0,b.jsx)(j,{conversation:a,isSelected:c===a.id,onClick:()=>e(a.id)},a.id)),0===a.length&&(0,b.jsx)("div",{className:"p-8 text-center text-slate-400 text-sm",children:"暂无会话"})]})]})}function j({conversation:a,isSelected:c,onClick:d}){return(0,b.jsxs)("div",{onClick:d,className:`p-3 flex gap-3 cursor-pointer border-b border-slate-100 hover:bg-slate-100 transition-colors relative ${c?"bg-brand-50/50 border-l-4 border-l-brand-500":""}`,children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)(g.Avatar,{className:"h-10 w-10",children:(0,b.jsx)(g.AvatarFallback,{className:"text-xs bg-slate-200",children:a.name.slice(0,2)})}),a.isOverdue&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white flex items-center justify-center animate-pulse",children:(0,b.jsx)(e.AlertCircle,{size:10,className:"text-white"})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-slate-900 truncate",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-slate-400 whitespace-nowrap ml-2",children:a.lastMessageTime})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 truncate",children:a.lastMessage}),a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-1.5",children:a.tags.slice(0,2).map(a=>(0,b.jsx)("span",{className:"text-[10px] bg-slate-200 text-slate-600 px-1.5 py-0.5 rounded",children:a},a))})]}),a.unreadCount>0&&(0,b.jsx)("div",{className:"absolute right-3 top-3",children:(0,b.jsx)("span",{className:"w-5 h-5 bg-brand-600 text-white text-[10px] rounded-full flex items-center justify-center",children:a.unreadCount})}),a.isOverdue&&(0,b.jsx)("div",{className:"absolute right-2 bottom-2",children:(0,b.jsx)("span",{className:"text-[10px] text-red-500 font-bold bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:"服务超时"})})]})}var k=a.i(70106);let l=(0,k.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var m=a.i(43108),n=a.i(69520);let o=(0,k.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),p=(0,k.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var q=a.i(40695);function r({conversation:a,messages:c,draft:d,onDraftChange:e,onCopyDraft:f}){return a?(0,b.jsxs)("div",{className:"flex-1 flex flex-col bg-[#F5F6F8]",children:[(0,b.jsx)(s,{conversation:a}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsxs)("span",{className:"text-xs font-medium text-slate-400 flex items-center gap-1.5 bg-white px-3 py-1 rounded-full shadow-sm",children:[(0,b.jsx)(n.RefreshCw,{size:12,className:"animate-spin"})," 正在同步企微数据..."]})}),c.map(a=>(0,b.jsx)(t,{message:a},a.id))]}),(0,b.jsx)(u,{draft:d,onDraftChange:e,onCopyDraft:f})]}):(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center bg-[#F5F6F8]",children:(0,b.jsx)("div",{className:"text-center text-slate-400",children:(0,b.jsx)("p",{children:"选择一个会话开始"})})})}function s({conversation:a}){return(0,b.jsxs)("div",{className:"h-14 border-b border-slate-200 flex items-center justify-between px-4 bg-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:a.name}),a.isOverdue&&(0,b.jsx)(f.Badge,{variant:"destructive",className:"animate-pulse",children:"服务超时"}),a.clientStatus&&(0,b.jsx)(f.Badge,{variant:"signed"===a.clientStatus?"success":"secondary",children:"signed"===a.clientStatus?"已签约":"未签约"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-slate-400 bg-slate-50 px-2 py-1 rounded",children:[(0,b.jsx)(m.Lock,{size:12})," 只读模式"]}),(0,b.jsx)("button",{className:"text-slate-400 hover:text-slate-600",children:(0,b.jsx)(l,{size:18})})]})]})}function t({message:a}){return(0,b.jsx)("div",{className:`flex ${a.isMe?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`flex gap-2 max-w-[70%] ${a.isMe?"flex-row-reverse":""}`,children:[(0,b.jsx)(g.Avatar,{className:"h-8 w-8 flex-shrink-0",children:(0,b.jsx)(g.AvatarFallback,{className:`text-xs ${a.isMe?"bg-brand-100 text-brand-700":"bg-slate-200"}`,children:a.senderName.slice(0,1)})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:`text-xs text-slate-400 mb-1 ${a.isMe?"text-right":""}`,children:[a.senderName," · ",a.timestamp]}),(0,b.jsx)("div",{className:`px-4 py-2.5 rounded-2xl text-sm ${a.isMe?"bg-brand-600 text-white rounded-tr-sm":"bg-white text-slate-800 rounded-tl-sm shadow-sm"}`,children:a.content})]})]})})}function u({draft:a,onDraftChange:c,onCopyDraft:d}){return(0,b.jsxs)("div",{className:"border-t border-slate-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"text-xs text-slate-400 mb-2 flex items-center gap-1",children:[(0,b.jsx)(p,{size:12})," 回复草稿区（复制后到企微发送）"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("textarea",{value:a,onChange:a=>c(a.target.value),placeholder:"AI 建议的回复会显示在这里，也可手动编辑...",className:"flex-1 border border-slate-200 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-brand-500",rows:2}),(0,b.jsxs)(q.Button,{onClick:d,disabled:!a,className:"self-end",children:[(0,b.jsx)(o,{size:16,className:"mr-1"})," 复制"]})]})]})}let v=(0,k.default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),w=(0,k.default)("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);var x=a.i(4720),y=a.i(69769),z=a.i(67453),A=a.i(73570);let B=(0,k.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var C=a.i(52495);let D=(0,k.default)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var E=a.i(24669);let F=(0,k.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),G=(0,k.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),H=[{key:"profile",label:"客户画像",icon:v},{key:"ai",label:"AI教练",icon:w},{key:"feed",label:"素材推送",icon:x.FileText}];function I({conversation:a,aiAnalysis:c,materials:d,activeTab:e,onTabChange:f,onUseScript:g,onRefreshAnalysis:h,isAnalysisLoading:i}){return(0,b.jsxs)("div",{className:"w-80 border-l border-slate-200 flex flex-col bg-white",children:[(0,b.jsx)("div",{className:"flex border-b border-slate-200",children:H.map(a=>{let c=a.icon;return(0,b.jsxs)("button",{onClick:()=>f(a.key),className:`flex-1 py-3 text-xs font-medium flex items-center justify-center gap-1.5 border-b-2 transition-colors ${e===a.key?"border-brand-500 text-brand-600 bg-brand-50/50":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[(0,b.jsx)(c,{size:14}),a.label]},a.key)})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["profile"===e&&(0,b.jsx)(J,{conversation:a}),"ai"===e&&(0,b.jsx)(O,{analysis:c,onUseScript:g,onRefresh:h,isLoading:i}),"feed"===e&&(0,b.jsx)(P,{materials:d})]})]})}function J({conversation:a}){return a?(0,b.jsxs)("div",{className:"divide-y divide-slate-100",children:[(0,b.jsx)(K,{conversation:a}),a.serviceProject&&(0,b.jsx)(L,{conversation:a}),(0,b.jsx)(M,{conversation:a}),a.serviceTeam&&(0,b.jsx)(N,{team:a.serviceTeam})]}):(0,b.jsx)("div",{className:"p-8 text-center text-slate-400 text-sm",children:"选择会话查看客户画像"})}function K({conversation:a}){return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(g.Avatar,{className:"h-12 w-12",children:(0,b.jsx)(g.AvatarFallback,{className:"bg-brand-100 text-brand-700",children:a.name.slice(0,2)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-slate-900",children:a.name}),a.grade&&(0,b.jsxs)("span",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[(0,b.jsx)(y.GraduationCap,{size:12})," ",a.grade]})]})]}),a.tags&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:a.tags.map(a=>(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:a},a))})]})}function L({conversation:a}){let c=(a=>{switch(a){case"critical":return{color:"bg-red-50 text-red-700 border-red-200",icon:(0,b.jsx)(e.AlertCircle,{size:14,className:"text-red-500"}),label:"风险"};case"attention":return{color:"bg-amber-50 text-amber-700 border-amber-200",icon:(0,b.jsx)(A.AlertTriangle,{size:14,className:"text-amber-500"}),label:"关注"};default:return{color:"bg-emerald-50 text-emerald-700 border-emerald-200",icon:(0,b.jsx)(z.CheckCircle2,{size:14,className:"text-emerald-500"}),label:"正常"}}})(a.riskStatus);return(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsx)("h5",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"服务状态"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"申请方向"}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:a.serviceProject})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"服务阶段"}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:a.serviceStage})]}),void 0!==a.serviceProgress&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"服务进度"}),(0,b.jsxs)("span",{className:"font-bold text-brand-600",children:[a.serviceProgress,"%"]})]}),(0,b.jsx)("div",{className:"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-brand-500 rounded-full",style:{width:`${a.serviceProgress}%`}})})]}),(0,b.jsxs)("div",{className:`flex items-center justify-between p-2.5 rounded-lg border ${c.color}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[c.icon,(0,b.jsx)("span",{className:"text-xs font-bold",children:"风险等级"})]}),(0,b.jsx)("span",{className:"text-xs font-bold",children:c.label})]})]})]})}function M({conversation:a}){let c=[a.nextKeyNode&&{label:a.nextKeyNode.label,date:a.nextKeyNode.date,active:!0},a.lastFollowUp&&{label:"最近跟进",date:a.lastFollowUp},a.contractDate&&{label:"签约时间",date:a.contractDate},a.joinDate&&{label:"添加时间",date:a.joinDate}].filter(Boolean);return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h5",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"关键时间轴"}),(0,b.jsx)("div",{className:"relative border-l-2 border-slate-100 ml-2 space-y-4",children:c.map((a,c)=>(0,b.jsxs)("div",{className:"ml-4 relative",children:[(0,b.jsx)("div",{className:`absolute -left-[21px] top-0.5 w-3 h-3 rounded-full border-2 border-white ${a.active?"bg-brand-500":"bg-slate-200"}`}),(0,b.jsx)("div",{className:`text-xs ${a.active?"font-bold text-brand-600":"font-medium text-slate-500"}`,children:a.label}),(0,b.jsx)("div",{className:`text-xs ${a.active?"text-slate-500":"text-slate-400"}`,children:a.date})]},c))})]})}function N({team:a}){let c=[a.consultant&&{name:a.consultant,role:"顾问",color:"bg-blue-100 text-blue-700",short:"顾"},a.leadTutor&&{name:a.leadTutor,role:"主导师",color:"bg-purple-100 text-purple-700",short:"主"},a.associateTutor&&{name:a.associateTutor,role:"协作导师",color:"bg-slate-100 text-slate-700",short:"协"}].filter(Boolean);return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h5",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"服务团队"}),(0,b.jsx)("div",{className:"space-y-2",children:c.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Avatar,{className:"h-6 w-6",children:(0,b.jsx)(g.AvatarFallback,{className:`text-[10px] ${a.color}`,children:a.short})}),(0,b.jsx)("span",{className:"text-sm text-slate-700",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-slate-400",children:a.role})]},c))})]})}function O({analysis:a,onUseScript:c,onRefresh:d,isLoading:g}){if(g)return(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"AI 分析中..."})]});if(!a)return(0,b.jsxs)("div",{className:"p-8 text-center text-slate-400",children:[(0,b.jsx)(w,{size:32,className:"mx-auto mb-2 opacity-30"}),(0,b.jsx)("p",{className:"text-sm",children:"暂无AI分析建议"}),d&&(0,b.jsxs)("button",{onClick:d,className:"mt-3 text-xs text-brand-600 hover:text-brand-700 flex items-center gap-1 mx-auto",children:[(0,b.jsx)(n.RefreshCw,{size:12})," 触发分析"]})]});let h={positive:(0,b.jsx)(E.TrendingUp,{size:14,className:"text-emerald-500"}),negative:(0,b.jsx)(F,{size:14,className:"text-red-500"}),neutral:(0,b.jsx)(G,{size:14,className:"text-slate-400"}),mixed:(0,b.jsx)(e.AlertCircle,{size:14,className:"text-amber-500"})}[a.sentiment.overall],i={positive:"积极",negative:"消极",neutral:"中性",mixed:"复杂"}[a.sentiment.overall];return(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[d&&(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("button",{onClick:d,className:"text-xs text-slate-500 hover:text-brand-600 flex items-center gap-1",children:[(0,b.jsx)(n.RefreshCw,{size:12})," 重新分析"]})}),(0,b.jsxs)("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(w,{size:16,className:"text-purple-600"}),(0,b.jsx)("h4",{className:"text-sm font-bold text-purple-800",children:"意图分析"}),(0,b.jsxs)("span",{className:"text-xs text-purple-500 ml-auto",children:["置信度 ",Math.round(100*a.intent.confidence),"%"]})]}),(0,b.jsx)("p",{className:"text-sm text-purple-700 font-medium",children:a.intent.primary}),a.intent.secondary&&a.intent.secondary.length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-2",children:a.intent.secondary.map((a,c)=>(0,b.jsx)("span",{className:"text-xs bg-purple-100 text-purple-600 px-2 py-0.5 rounded",children:a},c))})]}),(0,b.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[h,(0,b.jsx)("h4",{className:"text-sm font-bold text-slate-700",children:"情绪状态"}),(0,b.jsx)("span",{className:"text-xs text-slate-500 ml-auto",children:i})]}),a.sentiment.emotions.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.sentiment.emotions.map((a,c)=>(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:a},c))})]}),a.keyPoints.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"关键信息"}),(0,b.jsx)("div",{className:"space-y-2",children:a.keyPoints.map((a,c)=>(0,b.jsxs)("div",{className:`p-2 rounded-lg border text-sm ${"high"===a.importance?"bg-red-50 border-red-100 text-red-700":"medium"===a.importance?"bg-amber-50 border-amber-100 text-amber-700":"bg-slate-50 border-slate-100 text-slate-600"}`,children:[(0,b.jsx)("div",{className:"font-medium",children:a.topic}),a.context&&(0,b.jsx)("div",{className:"text-xs opacity-75 mt-0.5",children:a.context})]},c))})]}),(0,b.jsxs)("div",{className:`p-3 rounded-xl border ${{low:"bg-emerald-50 border-emerald-200 text-emerald-700",medium:"bg-amber-50 border-amber-200 text-amber-700",high:"bg-orange-50 border-orange-200 text-orange-700",critical:"bg-red-50 border-red-200 text-red-700"}[a.riskAssessment.level]}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(A.AlertTriangle,{size:14}),(0,b.jsxs)("span",{className:"text-xs font-bold",children:["风险等级：",a.riskAssessment.level.toUpperCase()]})]}),a.riskAssessment.factors.length>0&&(0,b.jsx)("ul",{className:"text-xs space-y-1 ml-5 list-disc",children:a.riskAssessment.factors.map((a,c)=>(0,b.jsx)("li",{children:a},c))}),a.riskAssessment.suggestions.length>0&&(0,b.jsxs)("div",{className:"mt-2 pt-2 border-t border-current/10",children:[(0,b.jsx)("div",{className:"text-xs font-medium mb-1",children:"建议："}),(0,b.jsx)("ul",{className:"text-xs space-y-1 ml-5 list-disc",children:a.riskAssessment.suggestions.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]}),a.suggestedReplies.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"推荐话术"}),(0,b.jsx)("div",{className:"space-y-2",children:a.suggestedReplies.map((a,d)=>(0,b.jsxs)("div",{className:"bg-white p-3 rounded-xl border border-slate-200 hover:border-brand-300 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,b.jsxs)("span",{className:"text-xs text-slate-400",children:["语气：",a.tone]}),1===a.priority&&(0,b.jsx)("span",{className:"text-xs bg-brand-100 text-brand-600 px-1.5 py-0.5 rounded",children:"推荐"})]}),(0,b.jsx)("p",{className:"text-sm text-slate-700 leading-relaxed mb-2",children:a.content}),(0,b.jsxs)("button",{onClick:()=>c(a.content),className:"w-full flex items-center justify-center gap-1.5 text-xs font-medium bg-slate-50 text-slate-600 py-1.5 rounded-lg hover:bg-brand-50 hover:text-brand-700 transition-colors",children:[(0,b.jsx)(o,{size:12})," 采纳话术"]})]},d))})]}),(0,b.jsxs)("div",{className:"text-xs text-slate-400 text-center pt-2 border-t border-slate-100",children:["由 ",a.metadata.provider,"/",a.metadata.model," 提供",a.metadata.processingTime&&` \xb7 ${a.metadata.processingTime}ms`]})]})}function P({materials:a}){return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"px-4 py-3 bg-orange-50/50 border-b border-orange-100",children:(0,b.jsxs)("h4",{className:"text-xs font-bold text-orange-800 flex items-center gap-1",children:[(0,b.jsx)(p,{size:12})," 公众号/视频号更新"]})}),(0,b.jsx)("div",{className:"divide-y divide-slate-100",children:a.map(a=>(0,b.jsxs)("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex gap-3 mb-2",children:[(0,b.jsx)("div",{className:`w-14 h-10 rounded flex items-center justify-center flex-shrink-0 ${"video"===a.type?"bg-slate-800":"bg-slate-200"}`,children:"video"===a.type?(0,b.jsx)(D,{size:16,className:"text-white"}):(0,b.jsx)(x.FileText,{size:16,className:"text-slate-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-xs font-bold text-slate-800 line-clamp-2 leading-tight mb-1",children:a.title}),(0,b.jsxs)("span",{className:"text-[10px] text-slate-400",children:[a.source," · ",a.date]})]})]}),(0,b.jsxs)("p",{className:"text-[11px] text-slate-500 bg-slate-50 p-2 rounded mb-2 border border-slate-100",children:[(0,b.jsx)("span",{className:"font-semibold text-slate-400 mr-1",children:"话术："}),a.summary]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{className:"flex-1 text-[10px] font-medium bg-white border border-slate-200 py-1.5 rounded text-slate-600 hover:text-brand-600 hover:border-brand-200 transition-colors flex items-center justify-center gap-1",children:[(0,b.jsx)(C.ExternalLink,{size:10})," 预览"]}),(0,b.jsxs)("button",{className:"flex-1 text-[10px] font-bold bg-brand-50 border border-brand-100 py-1.5 rounded text-brand-700 hover:bg-brand-100 transition-colors flex items-center justify-center gap-1",children:[(0,b.jsx)(B,{size:10})," 发送素材"]})]})]},a.id))})]})}var Q=a.i(9444),R=a.i(99278),S=a.i(69240);let T=new Map;function U(a){let b=T.get(a);return b?b():null}class V{name="mock";async analyzeConversation(a){await new Promise(a=>setTimeout(a,500+500*Math.random()));let b=a.messages[a.messages.length-1],c=b?.content||"",d=this.analyzeSentiment(c),e=this.analyzeIntent(c),f=this.extractKeyPoints(c),g=this.assessRisk(c,d);return{intent:{primary:e.primary,confidence:e.confidence,secondary:e.secondary},sentiment:{overall:d.overall,score:d.score,emotions:d.emotions},keyPoints:f,riskAssessment:{level:g.level,factors:g.factors,suggestions:g.suggestions},suggestedReplies:this.generateSuggestedReplies(e.primary,d.overall),metadata:{model:"mock-v1",provider:"mock",tokensUsed:Math.floor(500*Math.random())+100,processingTime:Math.floor(500*Math.random())+200}}}async healthCheck(){return!0}analyzeSentiment(a){let b=a.toLowerCase(),c=["谢谢","感谢","太好了","满意","期待","开心","喜欢","棒","优秀"].filter(a=>b.includes(a)).length,d=["不满","失望","担心","焦虑","着急","问题","投诉","退","差"].filter(a=>b.includes(a)).length,e=["急","马上","立刻","赶紧","截止","来不及"].filter(a=>b.includes(a)).length,f=[];c>0&&f.push("积极","期待"),d>0&&f.push("担忧","不满"),e>0&&f.push("紧迫","焦虑"),0===f.length&&f.push("平静");let g="neutral",h=0;return c>d?(g="positive",h=Math.min(.3+.2*c,1)):d>c?(g="negative",h=Math.max(-.3-.2*d,-1)):c>0&&d>0&&(g="mixed",h=0),{overall:g,score:h,emotions:f}}analyzeIntent(a){let b=a.toLowerCase(),c="一般咨询",d=.6,e=[];for(let a of[{keywords:["截止","日期","时间","什么时候","多久"],intent:"询问时间节点",confidence:.85},{keywords:["费用","价格","多少钱","收费","预算"],intent:"咨询费用",confidence:.9},{keywords:["进度","怎么样","到哪了","状态"],intent:"询问进度",confidence:.85},{keywords:["文书","申请","材料","资料"],intent:"询问申请材料",confidence:.8},{keywords:["推荐","建议","哪个好","怎么选"],intent:"寻求建议",confidence:.8},{keywords:["问题","不对","错了","修改"],intent:"反馈问题",confidence:.85},{keywords:["谢谢","感谢","辛苦"],intent:"表达感谢",confidence:.9},{keywords:["你好","在吗","请问"],intent:"打招呼",confidence:.95}])a.keywords.filter(a=>b.includes(a)).length>0&&(a.confidence>d?("一般咨询"!==c&&e.push(c),c=a.intent,d=a.confidence):e.push(a.intent));return{primary:c,confidence:d,secondary:e.slice(0,2)}}extractKeyPoints(a){let b=[];return/截止|deadline|ddl|\d+月|\d+号/i.test(a)&&b.push({topic:"时间节点",importance:"high",context:"客户关注具体时间安排"}),/费用|价格|收费|钱|预算/i.test(a)&&b.push({topic:"费用咨询",importance:"high",context:"客户关注服务费用"}),/进度|状态|怎么样|到哪/i.test(a)&&b.push({topic:"进度跟进",importance:"medium",context:"客户关心当前进展"}),/文书|essay|ps|cv|推荐信/i.test(a)&&b.push({topic:"文书材料",importance:"high",context:"涉及申请核心材料"}),0===b.length&&b.push({topic:"日常沟通",importance:"low",context:"常规客户互动"}),b}assessRisk(a,b){let c=[],d=[],e="low";return"negative"===b.overall&&(c.push("客户情绪偏负面"),d.push("注意安抚客户情绪"),e="medium"),/急|马上|立刻|来不及/i.test(a)&&(c.push("客户表达紧迫感"),d.push("优先处理，及时响应"),e="medium"===e?"high":"medium"),/投诉|不满|差评|退款/i.test(a)&&(c.push("潜在投诉风险"),d.push("升级处理，主管介入"),e="high"),/考虑|其他|别家|不想/i.test(a)&&(c.push("客户可能流失"),d.push("了解原因，挽留客户"),e="low"===e?"medium":e),0===c.length&&(c.push("无明显风险因素"),d.push("保持正常服务节奏")),{level:e,factors:c,suggestions:d}}generateSuggestedReplies(a,b){let c=[];switch(a){case"询问时间节点":c.push({content:"您好！关于时间安排，让我帮您确认一下具体的截止日期，稍后给您详细说明。",tone:"专业",priority:1});break;case"询问进度":c.push({content:"您好！目前您的申请进度正在顺利推进中，我来给您详细汇报一下当前状态。",tone:"亲切",priority:1});break;case"咨询费用":c.push({content:"您好！感谢您的咨询。关于费用方面，我来给您详细介绍一下我们的服务套餐和价格。",tone:"专业",priority:1});break;case"反馈问题":c.push({content:"非常感谢您的反馈！我已经记录下您提到的问题，会尽快处理并给您回复。",tone:"诚恳",priority:1});break;default:c.push({content:"您好！感谢您的消息，我来为您解答。",tone:"亲切",priority:1})}return"negative"===b&&c.push({content:"非常理解您的心情，我们一定会尽全力为您解决。请放心，您的问题我们会优先处理。",tone:"安抚",priority:2}),c}}class W{name="openai";config;constructor(a){this.config={apiKey:a?.apiKey||process.env.OPENAI_API_KEY,baseUrl:a?.baseUrl||"https://api.openai.com/v1",model:a?.model||"gpt-4o-mini",maxTokens:a?.maxTokens||2e3,temperature:a?.temperature||.3,timeout:a?.timeout||3e4}}async analyzeConversation(a){if(!this.config.apiKey)throw Error("OpenAI API key not configured");let b=Date.now(),c=this.buildSystemPrompt(),d=this.buildUserPrompt(a),e=await fetch(`${this.config.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},body:JSON.stringify({model:this.config.model,messages:[{role:"system",content:c},{role:"user",content:d}],max_tokens:this.config.maxTokens,temperature:this.config.temperature,response_format:{type:"json_object"}}),signal:AbortSignal.timeout(this.config.timeout)});if(!e.ok){let a=await e.text();throw Error(`OpenAI API error: ${e.status} - ${a}`)}let f=await e.json(),g=f.choices?.[0]?.message?.content;if(!g)throw Error("Empty response from OpenAI");let h=JSON.parse(g),i=Date.now()-b;return{intent:{primary:h.intent?.primary||"一般咨询",confidence:h.intent?.confidence||.7,secondary:h.intent?.secondary||[]},sentiment:{overall:h.sentiment?.overall||"neutral",score:h.sentiment?.score||0,emotions:h.sentiment?.emotions||[]},keyPoints:h.keyPoints||[],riskAssessment:{level:h.riskAssessment?.level||"low",factors:h.riskAssessment?.factors||[],suggestions:h.riskAssessment?.suggestions||[]},suggestedReplies:h.suggestedReplies||[],metadata:{model:this.config.model,provider:"openai",tokensUsed:f.usage?.total_tokens,processingTime:i}}}async healthCheck(){if(!this.config.apiKey)return!1;try{return(await fetch(`${this.config.baseUrl}/models`,{headers:{Authorization:`Bearer ${this.config.apiKey}`},signal:AbortSignal.timeout(5e3)})).ok}catch{return!1}}buildSystemPrompt(){return`你是一个专业的客户服务分析助手，专门为留学咨询机构分析企业微信会话。

你的任务是分析客户会话并提供以下信息：
1. 意图分析：识别客户的主要和次要意图
2. 情绪分析：评估客户的情绪状态
3. 关键点提取：提取会话中的重要信息
4. 风险评估：识别潜在的服务风险
5. 建议回复：提供专业的回复建议

请以 JSON 格式返回分析结果，结构如下：
{
  "intent": {
    "primary": "主要意图",
    "confidence": 0.85,
    "secondary": ["次要意图1", "次要意图2"]
  },
  "sentiment": {
    "overall": "positive|neutral|negative|mixed",
    "score": 0.5,
    "emotions": ["期待", "焦虑"]
  },
  "keyPoints": [
    {
      "topic": "关键主题",
      "importance": "high|medium|low",
      "context": "上下文说明"
    }
  ],
  "riskAssessment": {
    "level": "low|medium|high|critical",
    "factors": ["风险因素"],
    "suggestions": ["建议措施"]
  },
  "suggestedReplies": [
    {
      "content": "建议回复内容",
      "tone": "专业|亲切|安抚",
      "priority": 1
    }
  ]
}

注意事项：
- 意图置信度范围 0-1
- 情绪分数范围 -1 到 1（-1 最负面，1 最正面）
- 回复建议要符合留学咨询的专业场景
- 关注时间节点、费用、进度等敏感话题`}buildUserPrompt(a){let b="请分析以下会话：\n\n";for(let c of(a.context&&(b+="【客户背景】\n",a.context.customerName&&(b+=`客户姓名：${a.context.customerName}
`),a.context.customerStage&&(b+=`服务阶段：${a.context.customerStage}
`),a.context.customerTags?.length&&(b+=`客户标签：${a.context.customerTags.join(", ")}
`),b+="\n"),b+="【会话内容】\n",a.messages)){let a=c.senderName||("user"===c.role?"客户":"顾问");b+=`${a}：${c.content}
`}return b}}class X{name="anthropic";config;constructor(a){this.config={apiKey:a?.apiKey||process.env.ANTHROPIC_API_KEY,baseUrl:a?.baseUrl||"https://api.anthropic.com/v1",model:a?.model||"claude-3-haiku-20240307",maxTokens:a?.maxTokens||2e3,temperature:a?.temperature||.3,timeout:a?.timeout||3e4}}async analyzeConversation(a){if(!this.config.apiKey)throw Error("Anthropic API key not configured");let b=Date.now(),c=this.buildSystemPrompt(),d=this.buildUserPrompt(a),e=await fetch(`${this.config.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.config.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.config.model,max_tokens:this.config.maxTokens,temperature:this.config.temperature,system:c,messages:[{role:"user",content:d}]}),signal:AbortSignal.timeout(this.config.timeout)});if(!e.ok){let a=await e.text();throw Error(`Anthropic API error: ${e.status} - ${a}`)}let f=await e.json(),g=f.content?.[0]?.text;if(!g)throw Error("Empty response from Anthropic");let h=g.match(/\{[\s\S]*\}/);if(!h)throw Error("Failed to parse JSON from Anthropic response");let i=JSON.parse(h[0]),j=Date.now()-b;return{intent:{primary:i.intent?.primary||"一般咨询",confidence:i.intent?.confidence||.7,secondary:i.intent?.secondary||[]},sentiment:{overall:i.sentiment?.overall||"neutral",score:i.sentiment?.score||0,emotions:i.sentiment?.emotions||[]},keyPoints:i.keyPoints||[],riskAssessment:{level:i.riskAssessment?.level||"low",factors:i.riskAssessment?.factors||[],suggestions:i.riskAssessment?.suggestions||[]},suggestedReplies:i.suggestedReplies||[],metadata:{model:this.config.model,provider:"anthropic",tokensUsed:(f.usage?.input_tokens||0)+(f.usage?.output_tokens||0),processingTime:j}}}async healthCheck(){if(!this.config.apiKey)return!1;try{return(await fetch(`${this.config.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.config.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.config.model,max_tokens:10,messages:[{role:"user",content:"hi"}]}),signal:AbortSignal.timeout(5e3)})).ok}catch{return!1}}buildSystemPrompt(){return`你是一个专业的客户服务分析助手，专门为留学咨询机构分析企业微信会话。

你的任务是分析客户会话并提供以下信息：
1. 意图分析：识别客户的主要和次要意图
2. 情绪分析：评估客户的情绪状态
3. 关键点提取：提取会话中的重要信息
4. 风险评估：识别潜在的服务风险
5. 建议回复：提供专业的回复建议

请以 JSON 格式返回分析结果，结构如下：
{
  "intent": {
    "primary": "主要意图",
    "confidence": 0.85,
    "secondary": ["次要意图1", "次要意图2"]
  },
  "sentiment": {
    "overall": "positive|neutral|negative|mixed",
    "score": 0.5,
    "emotions": ["期待", "焦虑"]
  },
  "keyPoints": [
    {
      "topic": "关键主题",
      "importance": "high|medium|low",
      "context": "上下文说明"
    }
  ],
  "riskAssessment": {
    "level": "low|medium|high|critical",
    "factors": ["风险因素"],
    "suggestions": ["建议措施"]
  },
  "suggestedReplies": [
    {
      "content": "建议回复内容",
      "tone": "专业|亲切|安抚",
      "priority": 1
    }
  ]
}

注意事项：
- 意图置信度范围 0-1
- 情绪分数范围 -1 到 1（-1 最负面，1 最正面）
- 回复建议要符合留学咨询的专业场景
- 只返回 JSON，不要有其他文字`}buildUserPrompt(a){let b="请分析以下会话：\n\n";for(let c of(a.context&&(b+="【客户背景】\n",a.context.customerName&&(b+=`客户姓名：${a.context.customerName}
`),a.context.customerStage&&(b+=`服务阶段：${a.context.customerStage}
`),a.context.customerTags?.length&&(b+=`客户标签：${a.context.customerTags.join(", ")}
`),b+="\n"),b+="【会话内容】\n",a.messages)){let a=c.senderName||("user"===c.role?"客户":"顾问");b+=`${a}：${c.content}
`}return b}}async function Y(a,b,c){let{forceRefresh:d=!1,context:e}=c||{},f=b[b.length-1]?.id||"empty",g=`${a}:${f}`;if(!d){let a=await Z(g);if(a.success&&a.data)return console.log("[AI] Using cached analysis:",g),(0,Q.success)(a.data.analysis)}console.log("[AI] Triggering AI analysis:",g);let h=await $(a,b,e);if(!h.success)return(0,Q.failure)(h.error);let i=await _(a,g,h.data);return i.success||console.warn("[AI] Failed to save analysis to DB:",i.error),(0,Q.success)(h.data)}async function Z(a){let b=(0,S.createClient)();try{var c;let{data:d,error:e}=await b.from("conversation_analyses").select("*").eq("idempotency_key",a).single();if(e){if("PGRST116"===e.code)return(0,Q.success)(null);if("42P01"===e.code||e.message.includes("does not exist"))return console.warn("[AI] conversation_analyses table not exists"),(0,Q.success)(null);return(0,Q.failure)((0,Q.createServiceError)(e,"获取分析结果失败"))}return(0,Q.success)({id:(c=d).id,conversationId:c.conversation_id,idempotencyKey:c.idempotency_key,analysis:{intent:{primary:c.intent_primary,confidence:c.intent_confidence,secondary:c.intent_secondary||void 0},sentiment:{overall:c.sentiment_overall,score:c.sentiment_score,emotions:c.sentiment_emotions||[]},keyPoints:c.key_points||[],riskAssessment:{level:c.risk_level,factors:c.risk_factors||[],suggestions:c.risk_suggestions||[]},suggestedReplies:c.suggested_replies||[],metadata:{provider:c.ai_provider,model:c.ai_model,tokensUsed:c.tokens_used||void 0,processingTime:c.processing_time_ms||void 0}},createdAt:c.created_at,updatedAt:c.updated_at})}catch(a){return console.error("getAnalysisFromDB error:",a),(0,Q.success)(null)}}async function $(a,b,c){try{let d=function(){let a=U(process.env.NEXT_PUBLIC_AI_PROVIDER||"openai");if(a)return a;let b=U("mock");if(b)return b;throw Error("No AI provider available")}(),e={conversationId:a,messages:b.map(a=>({role:a.isMe?"assistant":"user",content:a.content,timestamp:a.timestamp,senderName:a.senderName})),context:c},f=await d.analyzeConversation(e);return(0,Q.success)(f)}catch(a){return console.error("AI analysis error:",a),(0,Q.failure)((0,Q.createServiceError)(a,"AI 分析失败"))}}async function _(a,b,c){let d=(0,S.createClient)();try{let e={conversation_id:a,idempotency_key:b,intent_primary:c.intent.primary,intent_confidence:c.intent.confidence,intent_secondary:c.intent.secondary||null,sentiment_overall:c.sentiment.overall,sentiment_score:c.sentiment.score,sentiment_emotions:c.sentiment.emotions||null,key_points:c.keyPoints||null,risk_level:c.riskAssessment.level,risk_factors:c.riskAssessment.factors||null,risk_suggestions:c.riskAssessment.suggestions||null,suggested_replies:c.suggestedReplies||null,ai_provider:c.metadata.provider,ai_model:c.metadata.model,tokens_used:c.metadata.tokensUsed||null,processing_time_ms:c.metadata.processingTime||null},{error:f}=await d.from("conversation_analyses").upsert(e,{onConflict:"idempotency_key"});if(f)return console.error("Save analysis error:",f),(0,Q.failure)((0,Q.createServiceError)(f,"保存分析结果失败"));return(0,Q.success)(void 0)}catch(a){return(0,Q.failure)((0,Q.createServiceError)(a,"保存分析结果失败"))}}function aa(){let a=(0,Q.useToast)(),[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("profile"),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{A(!0);let b=await (0,R.getConversationList)({type:q});b.success?(e(b.data.data),b.data.data.length>0&&!o&&p(b.data.data[0].id)):(a.error("加载会话列表失败",b.error.message),e([])),A(!1)})()},[q]),(0,c.useEffect)(()=>{o&&(async()=>{C(!0),j(null);let[b,c]=await Promise.all([(0,R.getConversationMessages)(o),(0,R.getMarketingMaterials)()]);b.success?(g(b.data.data),n(b.data.hasMore),F(o,b.data.data)):(a.error("加载消息失败",b.error.message),g([])),c.success&&l(c.data),C(!1)})()},[o]);let F=async(a,b)=>{if(0===b.length)return;E(!0);let c=d.find(b=>b.id===a),e=await Y(a,b,{context:c?{customerName:c.name,customerStage:c.serviceStage,customerTags:c.tags}:void 0});e.success?j(e.data):console.warn("AI analysis failed:",e.error),E(!1)},G=async()=>{if(!o||0===f.length)return;E(!0);let b=d.find(a=>a.id===o),c=await Y(o,f,{forceRefresh:!0,context:b?{customerName:b.name,customerStage:b.serviceStage,customerTags:b.tags}:void 0});c.success?(j(c.data),a.success("分析完成","AI 分析已更新")):a.error("分析失败",c.error.message),E(!1)},H=d.filter(a=>!t||a.name.toLowerCase().includes(t.toLowerCase())),J=d.find(a=>a.id===o)||null;return(0,b.jsxs)("div",{className:"flex h-[calc(100vh-64px)] overflow-hidden bg-white",children:[(0,b.jsx)(i,{conversations:H,selectedId:o,onSelect:p,filter:q,onFilterChange:s,searchQuery:t,onSearchChange:u}),(0,b.jsx)(r,{conversation:J,messages:f,draft:x,onDraftChange:y,onCopyDraft:()=>{x&&(navigator.clipboard.writeText(x),a.success("已复制","内容已复制到剪贴板"))}}),(0,b.jsx)(I,{conversation:J,aiAnalysis:h,materials:k,activeTab:v,onTabChange:w,onUseScript:a=>{y(a)},onRefreshAnalysis:G,isAnalysisLoading:D})]})}T.set("mock",()=>new V),T.set("openai",()=>new W),T.set("anthropic",()=>new X),a.s(["default",()=>aa],28e3)}];

//# sourceMappingURL=app_%28protected%29_messages_page_tsx_7416db81._.js.map