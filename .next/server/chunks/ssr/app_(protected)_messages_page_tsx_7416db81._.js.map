{"version":3,"sources":["../../../../components/messages/ChatArea.tsx","../../../../components/messages/ConversationList.tsx","../../../../components/messages/RightPanel.tsx","../../../../lib/services/ai-analysis.service.ts","../../../../app/%28protected%29/messages/page.tsx","../../../../lib/ai/providers/openai.ts","../../../../lib/ai/providers/anthropic.ts","../../../../lib/ai/providers/mock.ts","../../../../node_modules/lucide-react/src/icons/minus.ts","../../../../node_modules/lucide-react/src/icons/ellipsis-vertical.ts","../../../../node_modules/lucide-react/src/icons/copy.ts","../../../../node_modules/lucide-react/src/icons/sparkles.ts","../../../../node_modules/lucide-react/src/icons/circle-user.ts","../../../../node_modules/lucide-react/src/icons/brain-circuit.ts","../../../../node_modules/lucide-react/src/icons/send.ts","../../../../node_modules/lucide-react/src/icons/youtube.ts","../../../../node_modules/lucide-react/src/icons/trending-down.ts","../../../../lib/ai/index.ts","../../../../lib/ai/types.ts"],"sourcesContent":["'use client'\n\nimport { MoreVertical, Lock, RefreshCw, Copy, Sparkles } from 'lucide-react'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport type { Conversation, Message } from '@/types/entities'\n\ninterface ChatAreaProps {\n  conversation: Conversation | null\n  messages: Message[]\n  draft: string\n  onDraftChange: (value: string) => void\n  onCopyDraft: () => void\n}\n\n/**\n * 聊天区域组件\n */\nexport function ChatArea({\n  conversation,\n  messages,\n  draft,\n  onDraftChange,\n  onCopyDraft,\n}: ChatAreaProps) {\n  if (!conversation) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center bg-[#F5F6F8]\">\n        <div className=\"text-center text-slate-400\">\n          <p>选择一个会话开始</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-[#F5F6F8]\">\n      {/* 聊天头部 */}\n      <ChatHeader conversation={conversation} />\n\n      {/* 消息列表 */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {/* 同步状态提示 */}\n        <div className=\"flex justify-center mb-4\">\n          <span className=\"text-xs font-medium text-slate-400 flex items-center gap-1.5 bg-white px-3 py-1 rounded-full shadow-sm\">\n            <RefreshCw size={12} className=\"animate-spin\" /> 正在同步企微数据...\n          </span>\n        </div>\n\n        {/* 消息气泡 */}\n        {messages.map((msg) => (\n          <MessageBubble key={msg.id} message={msg} />\n        ))}\n      </div>\n\n      {/* 草稿输入区 */}\n      <DraftArea\n        draft={draft}\n        onDraftChange={onDraftChange}\n        onCopyDraft={onCopyDraft}\n      />\n    </div>\n  )\n}\n\n// ============================================\n// 聊天头部\n// ============================================\n\nfunction ChatHeader({ conversation }: { conversation: Conversation }) {\n  return (\n    <div className=\"h-14 border-b border-slate-200 flex items-center justify-between px-4 bg-white\">\n      <div className=\"flex items-center gap-3\">\n        <h3 className=\"font-semibold text-slate-900\">{conversation.name}</h3>\n        {conversation.isOverdue && (\n          <Badge variant=\"destructive\" className=\"animate-pulse\">\n            服务超时\n          </Badge>\n        )}\n        {conversation.clientStatus && (\n          <Badge variant={conversation.clientStatus === 'signed' ? 'success' : 'secondary'}>\n            {conversation.clientStatus === 'signed' ? '已签约' : '未签约'}\n          </Badge>\n        )}\n      </div>\n      <div className=\"flex items-center gap-3\">\n        <div className=\"flex items-center gap-1.5 text-xs text-slate-400 bg-slate-50 px-2 py-1 rounded\">\n          <Lock size={12} /> 只读模式\n        </div>\n        <button className=\"text-slate-400 hover:text-slate-600\">\n          <MoreVertical size={18} />\n        </button>\n      </div>\n    </div>\n  )\n}\n\n// ============================================\n// 消息气泡\n// ============================================\n\nfunction MessageBubble({ message }: { message: Message }) {\n  return (\n    <div className={`flex ${message.isMe ? 'justify-end' : 'justify-start'}`}>\n      <div className={`flex gap-2 max-w-[70%] ${message.isMe ? 'flex-row-reverse' : ''}`}>\n        <Avatar className=\"h-8 w-8 flex-shrink-0\">\n          <AvatarFallback className={`text-xs ${message.isMe ? 'bg-brand-100 text-brand-700' : 'bg-slate-200'}`}>\n            {message.senderName.slice(0, 1)}\n          </AvatarFallback>\n        </Avatar>\n        <div>\n          <div className={`text-xs text-slate-400 mb-1 ${message.isMe ? 'text-right' : ''}`}>\n            {message.senderName} · {message.timestamp}\n          </div>\n          <div\n            className={`px-4 py-2.5 rounded-2xl text-sm ${\n              message.isMe\n                ? 'bg-brand-600 text-white rounded-tr-sm'\n                : 'bg-white text-slate-800 rounded-tl-sm shadow-sm'\n            }`}\n          >\n            {message.content}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// ============================================\n// 草稿输入区\n// ============================================\n\ninterface DraftAreaProps {\n  draft: string\n  onDraftChange: (value: string) => void\n  onCopyDraft: () => void\n}\n\nfunction DraftArea({ draft, onDraftChange, onCopyDraft }: DraftAreaProps) {\n  return (\n    <div className=\"border-t border-slate-200 bg-white p-4\">\n      <div className=\"text-xs text-slate-400 mb-2 flex items-center gap-1\">\n        <Sparkles size={12} /> 回复草稿区（复制后到企微发送）\n      </div>\n      <div className=\"flex gap-2\">\n        <textarea\n          value={draft}\n          onChange={(e) => onDraftChange(e.target.value)}\n          placeholder=\"AI 建议的回复会显示在这里，也可手动编辑...\"\n          className=\"flex-1 border border-slate-200 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-brand-500\"\n          rows={2}\n        />\n        <Button onClick={onCopyDraft} disabled={!draft} className=\"self-end\">\n          <Copy size={16} className=\"mr-1\" /> 复制\n        </Button>\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { Search, AlertCircle } from 'lucide-react'\nimport { Badge } from '@/components/ui/badge'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport type { Conversation, ConversationType } from '@/types/entities'\n\ninterface ConversationListProps {\n  conversations: Conversation[]\n  selectedId: string | null\n  onSelect: (id: string) => void\n  filter: ConversationType | 'all'\n  onFilterChange: (filter: ConversationType | 'all') => void\n  searchQuery: string\n  onSearchChange: (query: string) => void\n}\n\nconst filterOptions: { key: ConversationType | 'all'; label: string }[] = [\n  { key: 'all', label: '全部' },\n  { key: 'student', label: '学生' },\n  { key: 'parent', label: '家长' },\n  { key: 'internal', label: '内部' },\n]\n\n/**\n * 会话列表组件\n */\nexport function ConversationList({\n  conversations,\n  selectedId,\n  onSelect,\n  filter,\n  onFilterChange,\n  searchQuery,\n  onSearchChange,\n}: ConversationListProps) {\n  return (\n    <div className=\"w-80 border-r border-slate-200 flex flex-col bg-slate-50/50\">\n      {/* 筛选和搜索 */}\n      <div className=\"p-4 border-b border-slate-200 space-y-3\">\n        <div className=\"flex gap-2 overflow-x-auto pb-1\">\n          {filterOptions.map(f => (\n            <Badge\n              key={f.key}\n              variant={filter === f.key ? 'default' : 'outline'}\n              className=\"cursor-pointer whitespace-nowrap\"\n              onClick={() => onFilterChange(f.key)}\n            >\n              {f.label}\n            </Badge>\n          ))}\n        </div>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" size={14} />\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={e => onSearchChange(e.target.value)}\n            placeholder=\"搜索会话...\"\n            className=\"w-full pl-9 pr-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500 bg-white\"\n          />\n        </div>\n      </div>\n\n      {/* 会话列表 */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {conversations.map((conv) => (\n          <ConversationItem\n            key={conv.id}\n            conversation={conv}\n            isSelected={selectedId === conv.id}\n            onClick={() => onSelect(conv.id)}\n          />\n        ))}\n        {conversations.length === 0 && (\n          <div className=\"p-8 text-center text-slate-400 text-sm\">\n            暂无会话\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// ============================================\n// 会话列表项\n// ============================================\n\ninterface ConversationItemProps {\n  conversation: Conversation\n  isSelected: boolean\n  onClick: () => void\n}\n\nfunction ConversationItem({ conversation, isSelected, onClick }: ConversationItemProps) {\n  return (\n    <div\n      onClick={onClick}\n      className={`p-3 flex gap-3 cursor-pointer border-b border-slate-100 hover:bg-slate-100 transition-colors relative ${\n        isSelected ? 'bg-brand-50/50 border-l-4 border-l-brand-500' : ''\n      }`}\n    >\n      <div className=\"relative flex-shrink-0\">\n        <Avatar className=\"h-10 w-10\">\n          <AvatarFallback className=\"text-xs bg-slate-200\">\n            {conversation.name.slice(0, 2)}\n          </AvatarFallback>\n        </Avatar>\n        {conversation.isOverdue && (\n          <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white flex items-center justify-center animate-pulse\">\n            <AlertCircle size={10} className=\"text-white\" />\n          </div>\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex justify-between items-start mb-1\">\n          <h4 className=\"text-sm font-medium text-slate-900 truncate\">{conversation.name}</h4>\n          <span className=\"text-xs text-slate-400 whitespace-nowrap ml-2\">{conversation.lastMessageTime}</span>\n        </div>\n        <p className=\"text-xs text-slate-500 truncate\">{conversation.lastMessage}</p>\n        {conversation.tags && conversation.tags.length > 0 && (\n          <div className=\"flex gap-1 mt-1.5\">\n            {conversation.tags.slice(0, 2).map(tag => (\n              <span key={tag} className=\"text-[10px] bg-slate-200 text-slate-600 px-1.5 py-0.5 rounded\">\n                {tag}\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n      {conversation.unreadCount > 0 && (\n        <div className=\"absolute right-3 top-3\">\n          <span className=\"w-5 h-5 bg-brand-600 text-white text-[10px] rounded-full flex items-center justify-center\">\n            {conversation.unreadCount}\n          </span>\n        </div>\n      )}\n      {conversation.isOverdue && (\n        <div className=\"absolute right-2 bottom-2\">\n          <span className=\"text-[10px] text-red-500 font-bold bg-red-50 px-1.5 py-0.5 rounded border border-red-100\">\n            服务超时\n          </span>\n        </div>\n      )}\n    </div>\n  )\n}\n","'use client'\n\nimport {\n  UserCircle,\n  BrainCircuit,\n  FileText,\n  GraduationCap,\n  CheckCircle2,\n  AlertCircle,\n  AlertTriangle,\n  Copy,\n  Send,\n  ExternalLink,\n  Youtube,\n  Sparkles,\n  RefreshCw,\n  TrendingUp,\n  TrendingDown,\n  Minus,\n} from 'lucide-react'\nimport { Badge } from '@/components/ui/badge'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport type { Conversation, MarketingMaterial, RiskStatus, ServiceTeam } from '@/types/entities'\nimport type { ConversationAnalysis } from '@/lib/ai'\n\ntype TabKey = 'profile' | 'ai' | 'feed'\n\ninterface RightPanelProps {\n  conversation: Conversation | null\n  aiAnalysis: ConversationAnalysis | null\n  materials: MarketingMaterial[]\n  activeTab: TabKey\n  onTabChange: (tab: TabKey) => void\n  onUseScript: (script: string) => void\n  onRefreshAnalysis?: () => void\n  isAnalysisLoading?: boolean\n}\n\nconst tabs: { key: TabKey; label: string; icon: React.ComponentType<{ size?: number }> }[] = [\n  { key: 'profile', label: '客户画像', icon: UserCircle },\n  { key: 'ai', label: 'AI教练', icon: BrainCircuit },\n  { key: 'feed', label: '素材推送', icon: FileText },\n]\n\n/**\n * 右侧面板组件（客户画像/AI教练/素材推送）\n */\nexport function RightPanel({\n  conversation,\n  aiAnalysis,\n  materials,\n  activeTab,\n  onTabChange,\n  onUseScript,\n  onRefreshAnalysis,\n  isAnalysisLoading,\n}: RightPanelProps) {\n  return (\n    <div className=\"w-80 border-l border-slate-200 flex flex-col bg-white\">\n      {/* Tab 切换 */}\n      <div className=\"flex border-b border-slate-200\">\n        {tabs.map(tab => {\n          const Icon = tab.icon\n          return (\n            <button\n              key={tab.key}\n              onClick={() => onTabChange(tab.key)}\n              className={`flex-1 py-3 text-xs font-medium flex items-center justify-center gap-1.5 border-b-2 transition-colors ${\n                activeTab === tab.key\n                  ? 'border-brand-500 text-brand-600 bg-brand-50/50'\n                  : 'border-transparent text-slate-500 hover:text-slate-700'\n              }`}\n            >\n              <Icon size={14} />\n              {tab.label}\n            </button>\n          )\n        })}\n      </div>\n\n      {/* Tab 内容 */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {activeTab === 'profile' && <ProfileTab conversation={conversation} />}\n        {activeTab === 'ai' && (\n          <AICoachTab\n            analysis={aiAnalysis}\n            onUseScript={onUseScript}\n            onRefresh={onRefreshAnalysis}\n            isLoading={isAnalysisLoading}\n          />\n        )}\n        {activeTab === 'feed' && <MaterialsTab materials={materials} />}\n      </div>\n    </div>\n  )\n}\n\n// ============================================\n// 客户画像 Tab\n// ============================================\n\nfunction ProfileTab({ conversation }: { conversation: Conversation | null }) {\n  if (!conversation) {\n    return <div className=\"p-8 text-center text-slate-400 text-sm\">选择会话查看客户画像</div>\n  }\n\n  return (\n    <div className=\"divide-y divide-slate-100\">\n      <BasicInfoSection conversation={conversation} />\n      {conversation.serviceProject && <ServiceStatusSection conversation={conversation} />}\n      <TimelineSection conversation={conversation} />\n      {conversation.serviceTeam && <ServiceTeamSection team={conversation.serviceTeam} />}\n    </div>\n  )\n}\n\nfunction BasicInfoSection({ conversation }: { conversation: Conversation }) {\n  return (\n    <div className=\"p-4\">\n      <div className=\"flex items-center gap-3 mb-4\">\n        <Avatar className=\"h-12 w-12\">\n          <AvatarFallback className=\"bg-brand-100 text-brand-700\">\n            {conversation.name.slice(0, 2)}\n          </AvatarFallback>\n        </Avatar>\n        <div>\n          <h4 className=\"font-semibold text-slate-900\">{conversation.name}</h4>\n          {conversation.grade && (\n            <span className=\"text-xs text-slate-500 flex items-center gap-1 mt-1\">\n              <GraduationCap size={12} /> {conversation.grade}\n            </span>\n          )}\n        </div>\n      </div>\n      {conversation.tags && (\n        <div className=\"flex flex-wrap gap-1.5\">\n          {conversation.tags.map(tag => (\n            <Badge key={tag} variant=\"secondary\" className=\"text-xs\">{tag}</Badge>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nfunction ServiceStatusSection({ conversation }: { conversation: Conversation }) {\n  const getRiskStyle = (status?: RiskStatus) => {\n    switch (status) {\n      case 'critical': return { color: 'bg-red-50 text-red-700 border-red-200', icon: <AlertCircle size={14} className=\"text-red-500\" />, label: '风险' }\n      case 'attention': return { color: 'bg-amber-50 text-amber-700 border-amber-200', icon: <AlertTriangle size={14} className=\"text-amber-500\" />, label: '关注' }\n      default: return { color: 'bg-emerald-50 text-emerald-700 border-emerald-200', icon: <CheckCircle2 size={14} className=\"text-emerald-500\" />, label: '正常' }\n    }\n  }\n\n  const risk = getRiskStyle(conversation.riskStatus)\n\n  return (\n    <div className=\"p-4 space-y-3\">\n      <h5 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">服务状态</h5>\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-slate-500\">申请方向</span>\n          <span className=\"font-medium text-slate-900\">{conversation.serviceProject}</span>\n        </div>\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-slate-500\">服务阶段</span>\n          <span className=\"font-medium text-slate-900\">{conversation.serviceStage}</span>\n        </div>\n        {conversation.serviceProgress !== undefined && (\n          <div>\n            <div className=\"flex justify-between text-sm mb-1\">\n              <span className=\"text-slate-500\">服务进度</span>\n              <span className=\"font-bold text-brand-600\">{conversation.serviceProgress}%</span>\n            </div>\n            <div className=\"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden\">\n              <div className=\"h-full bg-brand-500 rounded-full\" style={{ width: `${conversation.serviceProgress}%` }} />\n            </div>\n          </div>\n        )}\n        <div className={`flex items-center justify-between p-2.5 rounded-lg border ${risk.color}`}>\n          <div className=\"flex items-center gap-2\">{risk.icon}<span className=\"text-xs font-bold\">风险等级</span></div>\n          <span className=\"text-xs font-bold\">{risk.label}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction TimelineSection({ conversation }: { conversation: Conversation }) {\n  const items = [\n    conversation.nextKeyNode && { label: conversation.nextKeyNode.label, date: conversation.nextKeyNode.date, active: true },\n    conversation.lastFollowUp && { label: '最近跟进', date: conversation.lastFollowUp },\n    conversation.contractDate && { label: '签约时间', date: conversation.contractDate },\n    conversation.joinDate && { label: '添加时间', date: conversation.joinDate },\n  ].filter(Boolean) as { label: string; date: string; active?: boolean }[]\n\n  return (\n    <div className=\"p-4\">\n      <h5 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3\">关键时间轴</h5>\n      <div className=\"relative border-l-2 border-slate-100 ml-2 space-y-4\">\n        {items.map((item, i) => (\n          <div key={i} className=\"ml-4 relative\">\n            <div className={`absolute -left-[21px] top-0.5 w-3 h-3 rounded-full border-2 border-white ${item.active ? 'bg-brand-500' : 'bg-slate-200'}`} />\n            <div className={`text-xs ${item.active ? 'font-bold text-brand-600' : 'font-medium text-slate-500'}`}>{item.label}</div>\n            <div className={`text-xs ${item.active ? 'text-slate-500' : 'text-slate-400'}`}>{item.date}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nfunction ServiceTeamSection({ team }: { team: ServiceTeam }) {\n  const members = [\n    team.consultant && { name: team.consultant, role: '顾问', color: 'bg-blue-100 text-blue-700', short: '顾' },\n    team.leadTutor && { name: team.leadTutor, role: '主导师', color: 'bg-purple-100 text-purple-700', short: '主' },\n    team.associateTutor && { name: team.associateTutor, role: '协作导师', color: 'bg-slate-100 text-slate-700', short: '协' },\n  ].filter(Boolean) as { name: string; role: string; color: string; short: string }[]\n\n  return (\n    <div className=\"p-4\">\n      <h5 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3\">服务团队</h5>\n      <div className=\"space-y-2\">\n        {members.map((m, i) => (\n          <div key={i} className=\"flex items-center gap-2\">\n            <Avatar className=\"h-6 w-6\">\n              <AvatarFallback className={`text-[10px] ${m.color}`}>{m.short}</AvatarFallback>\n            </Avatar>\n            <span className=\"text-sm text-slate-700\">{m.name}</span>\n            <span className=\"text-xs text-slate-400\">{m.role}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\n// ============================================\n// AI 教练 Tab\n// ============================================\n\ninterface AICoachTabProps {\n  analysis: ConversationAnalysis | null\n  onUseScript: (s: string) => void\n  onRefresh?: () => void\n  isLoading?: boolean\n}\n\nfunction AICoachTab({ analysis, onUseScript, onRefresh, isLoading }: AICoachTabProps) {\n  if (isLoading) {\n    return (\n      <div className=\"p-8 text-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full mx-auto mb-3\" />\n        <p className=\"text-sm text-slate-500\">AI 分析中...</p>\n      </div>\n    )\n  }\n\n  if (!analysis) {\n    return (\n      <div className=\"p-8 text-center text-slate-400\">\n        <BrainCircuit size={32} className=\"mx-auto mb-2 opacity-30\" />\n        <p className=\"text-sm\">暂无AI分析建议</p>\n        {onRefresh && (\n          <button\n            onClick={onRefresh}\n            className=\"mt-3 text-xs text-brand-600 hover:text-brand-700 flex items-center gap-1 mx-auto\"\n          >\n            <RefreshCw size={12} /> 触发分析\n          </button>\n        )}\n      </div>\n    )\n  }\n\n  // 情绪图标\n  const sentimentIcon = {\n    positive: <TrendingUp size={14} className=\"text-emerald-500\" />,\n    negative: <TrendingDown size={14} className=\"text-red-500\" />,\n    neutral: <Minus size={14} className=\"text-slate-400\" />,\n    mixed: <AlertCircle size={14} className=\"text-amber-500\" />,\n  }[analysis.sentiment.overall]\n\n  const sentimentLabel = {\n    positive: '积极',\n    negative: '消极',\n    neutral: '中性',\n    mixed: '复杂',\n  }[analysis.sentiment.overall]\n\n  // 风险颜色\n  const riskColors = {\n    low: 'bg-emerald-50 border-emerald-200 text-emerald-700',\n    medium: 'bg-amber-50 border-amber-200 text-amber-700',\n    high: 'bg-orange-50 border-orange-200 text-orange-700',\n    critical: 'bg-red-50 border-red-200 text-red-700',\n  }\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      {/* 刷新按钮 */}\n      {onRefresh && (\n        <div className=\"flex justify-end\">\n          <button\n            onClick={onRefresh}\n            className=\"text-xs text-slate-500 hover:text-brand-600 flex items-center gap-1\"\n          >\n            <RefreshCw size={12} /> 重新分析\n          </button>\n        </div>\n      )}\n\n      {/* 意图分析 */}\n      <div className=\"bg-purple-50 p-4 rounded-xl border border-purple-100\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          <BrainCircuit size={16} className=\"text-purple-600\" />\n          <h4 className=\"text-sm font-bold text-purple-800\">意图分析</h4>\n          <span className=\"text-xs text-purple-500 ml-auto\">\n            置信度 {Math.round(analysis.intent.confidence * 100)}%\n          </span>\n        </div>\n        <p className=\"text-sm text-purple-700 font-medium\">{analysis.intent.primary}</p>\n        {analysis.intent.secondary && analysis.intent.secondary.length > 0 && (\n          <div className=\"flex gap-1 mt-2\">\n            {analysis.intent.secondary.map((intent, i) => (\n              <span key={i} className=\"text-xs bg-purple-100 text-purple-600 px-2 py-0.5 rounded\">\n                {intent}\n              </span>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* 情绪分析 */}\n      <div className=\"bg-slate-50 p-4 rounded-xl border border-slate-200\">\n        <div className=\"flex items-center gap-2 mb-2\">\n          {sentimentIcon}\n          <h4 className=\"text-sm font-bold text-slate-700\">情绪状态</h4>\n          <span className=\"text-xs text-slate-500 ml-auto\">{sentimentLabel}</span>\n        </div>\n        {analysis.sentiment.emotions.length > 0 && (\n          <div className=\"flex flex-wrap gap-1\">\n            {analysis.sentiment.emotions.map((emotion, i) => (\n              <Badge key={i} variant=\"secondary\" className=\"text-xs\">\n                {emotion}\n              </Badge>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* 关键点 */}\n      {analysis.keyPoints.length > 0 && (\n        <div>\n          <h4 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2\">关键信息</h4>\n          <div className=\"space-y-2\">\n            {analysis.keyPoints.map((point, i) => (\n              <div\n                key={i}\n                className={`p-2 rounded-lg border text-sm ${\n                  point.importance === 'high'\n                    ? 'bg-red-50 border-red-100 text-red-700'\n                    : point.importance === 'medium'\n                    ? 'bg-amber-50 border-amber-100 text-amber-700'\n                    : 'bg-slate-50 border-slate-100 text-slate-600'\n                }`}\n              >\n                <div className=\"font-medium\">{point.topic}</div>\n                {point.context && <div className=\"text-xs opacity-75 mt-0.5\">{point.context}</div>}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* 风险评估 */}\n      <div className={`p-3 rounded-xl border ${riskColors[analysis.riskAssessment.level]}`}>\n        <div className=\"flex items-center gap-2 mb-2\">\n          <AlertTriangle size={14} />\n          <span className=\"text-xs font-bold\">风险等级：{analysis.riskAssessment.level.toUpperCase()}</span>\n        </div>\n        {analysis.riskAssessment.factors.length > 0 && (\n          <ul className=\"text-xs space-y-1 ml-5 list-disc\">\n            {analysis.riskAssessment.factors.map((factor, i) => (\n              <li key={i}>{factor}</li>\n            ))}\n          </ul>\n        )}\n        {analysis.riskAssessment.suggestions.length > 0 && (\n          <div className=\"mt-2 pt-2 border-t border-current/10\">\n            <div className=\"text-xs font-medium mb-1\">建议：</div>\n            <ul className=\"text-xs space-y-1 ml-5 list-disc\">\n              {analysis.riskAssessment.suggestions.map((sug, i) => (\n                <li key={i}>{sug}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n\n      {/* 推荐话术 */}\n      {analysis.suggestedReplies.length > 0 && (\n        <div>\n          <h4 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2\">推荐话术</h4>\n          <div className=\"space-y-2\">\n            {analysis.suggestedReplies.map((reply, idx) => (\n              <div key={idx} className=\"bg-white p-3 rounded-xl border border-slate-200 hover:border-brand-300 transition-colors\">\n                <div className=\"flex items-center gap-2 mb-1.5\">\n                  <span className=\"text-xs text-slate-400\">语气：{reply.tone}</span>\n                  {reply.priority === 1 && (\n                    <span className=\"text-xs bg-brand-100 text-brand-600 px-1.5 py-0.5 rounded\">推荐</span>\n                  )}\n                </div>\n                <p className=\"text-sm text-slate-700 leading-relaxed mb-2\">{reply.content}</p>\n                <button\n                  onClick={() => onUseScript(reply.content)}\n                  className=\"w-full flex items-center justify-center gap-1.5 text-xs font-medium bg-slate-50 text-slate-600 py-1.5 rounded-lg hover:bg-brand-50 hover:text-brand-700 transition-colors\"\n                >\n                  <Copy size={12} /> 采纳话术\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* AI 元数据 */}\n      <div className=\"text-xs text-slate-400 text-center pt-2 border-t border-slate-100\">\n        由 {analysis.metadata.provider}/{analysis.metadata.model} 提供\n        {analysis.metadata.processingTime && ` · ${analysis.metadata.processingTime}ms`}\n      </div>\n    </div>\n  )\n}\n\n// ============================================\n// 素材推送 Tab\n// ============================================\n\nfunction MaterialsTab({ materials }: { materials: MarketingMaterial[] }) {\n  return (\n    <div>\n      <div className=\"px-4 py-3 bg-orange-50/50 border-b border-orange-100\">\n        <h4 className=\"text-xs font-bold text-orange-800 flex items-center gap-1\">\n          <Sparkles size={12} /> 公众号/视频号更新\n        </h4>\n      </div>\n      <div className=\"divide-y divide-slate-100\">\n        {materials.map((item) => (\n          <div key={item.id} className=\"p-4 hover:bg-slate-50 transition-colors\">\n            <div className=\"flex gap-3 mb-2\">\n              <div className={`w-14 h-10 rounded flex items-center justify-center flex-shrink-0 ${item.type === 'video' ? 'bg-slate-800' : 'bg-slate-200'}`}>\n                {item.type === 'video' ? <Youtube size={16} className=\"text-white\" /> : <FileText size={16} className=\"text-slate-500\" />}\n              </div>\n              <div>\n                <h5 className=\"text-xs font-bold text-slate-800 line-clamp-2 leading-tight mb-1\">{item.title}</h5>\n                <span className=\"text-[10px] text-slate-400\">{item.source} · {item.date}</span>\n              </div>\n            </div>\n            <p className=\"text-[11px] text-slate-500 bg-slate-50 p-2 rounded mb-2 border border-slate-100\">\n              <span className=\"font-semibold text-slate-400 mr-1\">话术：</span>{item.summary}\n            </p>\n            <div className=\"flex gap-2\">\n              <button className=\"flex-1 text-[10px] font-medium bg-white border border-slate-200 py-1.5 rounded text-slate-600 hover:text-brand-600 hover:border-brand-200 transition-colors flex items-center justify-center gap-1\">\n                <ExternalLink size={10} /> 预览\n              </button>\n              <button className=\"flex-1 text-[10px] font-bold bg-brand-50 border border-brand-100 py-1.5 rounded text-brand-700 hover:bg-brand-100 transition-colors flex items-center justify-center gap-1\">\n                <Send size={10} /> 发送素材\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n","/**\n * AI 分析服务\n * \n * 负责会话 AI 分析的调度和持久化\n * 策略：优先读库，不存在才触发 AI\n */\n\nimport { createClient } from '@/lib/supabase/client'\nimport { createServiceError, success, failure, type ServiceResult } from '@/components/shared/Toast'\nimport { getDefaultProvider, type ConversationAnalysis, type AnalysisInput } from '@/lib/ai'\nimport type { Message } from '@/types/entities'\n\n// ============================================\n// 类型定义\n// ============================================\n\nexport interface StoredAnalysis {\n  id: string\n  conversationId: string\n  idempotencyKey: string\n  analysis: ConversationAnalysis\n  createdAt: string\n  updatedAt: string\n}\n\ninterface DBAnalysis {\n  id: string\n  conversation_id: string\n  idempotency_key: string\n  intent_primary: string\n  intent_confidence: number\n  intent_secondary: string[] | null\n  sentiment_overall: 'positive' | 'neutral' | 'negative' | 'mixed'\n  sentiment_score: number\n  sentiment_emotions: string[] | null\n  key_points: Record<string, unknown>[] | null\n  risk_level: 'low' | 'medium' | 'high' | 'critical'\n  risk_factors: string[] | null\n  risk_suggestions: string[] | null\n  suggested_replies: Record<string, unknown>[] | null\n  ai_provider: string\n  ai_model: string\n  tokens_used: number | null\n  processing_time_ms: number | null\n  created_at: string\n  updated_at: string\n}\n\n// ============================================\n// 服务函数\n// ============================================\n\n/**\n * 获取会话分析（优先读库）\n * \n * @param conversationId 会话 ID\n * @param messages 会话消息（用于计算幂等键和触发 AI）\n * @param forceRefresh 强制刷新（跳过缓存）\n */\nexport async function getConversationAnalysis(\n  conversationId: string,\n  messages: Message[],\n  options?: {\n    forceRefresh?: boolean\n    context?: AnalysisInput['context']\n  }\n): Promise<ServiceResult<ConversationAnalysis>> {\n  const { forceRefresh = false, context } = options || {}\n\n  // 1. 计算幂等键（conversation_id + 最后一条消息的 ID）\n  const lastMessageId = messages[messages.length - 1]?.id || 'empty'\n  const idempotencyKey = `${conversationId}:${lastMessageId}`\n\n  // 2. 如果不强制刷新，先尝试从数据库读取\n  if (!forceRefresh) {\n    const cachedResult = await getAnalysisFromDB(idempotencyKey)\n    if (cachedResult.success && cachedResult.data) {\n      console.log('[AI] Using cached analysis:', idempotencyKey)\n      return success(cachedResult.data.analysis)\n    }\n  }\n\n  // 3. 数据库没有，触发 AI 分析\n  console.log('[AI] Triggering AI analysis:', idempotencyKey)\n  const aiResult = await triggerAIAnalysis(conversationId, messages, context)\n  \n  if (!aiResult.success) {\n    return failure(aiResult.error)\n  }\n\n  // 4. 将分析结果存入数据库\n  const saveResult = await saveAnalysisToDB(conversationId, idempotencyKey, aiResult.data)\n  if (!saveResult.success) {\n    console.warn('[AI] Failed to save analysis to DB:', saveResult.error)\n    // 保存失败不影响返回结果\n  }\n\n  return success(aiResult.data)\n}\n\n/**\n * 从数据库获取分析结果\n */\nexport async function getAnalysisFromDB(\n  idempotencyKey: string\n): Promise<ServiceResult<StoredAnalysis | null>> {\n  const supabase = createClient()\n\n  try {\n    const { data, error } = await supabase\n      .from('conversation_analyses')\n      .select('*')\n      .eq('idempotency_key', idempotencyKey)\n      .single()\n\n    if (error) {\n      if (error.code === 'PGRST116') {\n        // 记录不存在\n        return success(null)\n      }\n\n      if (error.code === '42P01' || error.message.includes('does not exist')) {\n        console.warn('[AI] conversation_analyses table not exists')\n        return success(null)\n      }\n\n      return failure(createServiceError(error, '获取分析结果失败'))\n    }\n\n    return success(transformDBAnalysis(data as DBAnalysis))\n  } catch (error) {\n    console.error('getAnalysisFromDB error:', error)\n    return success(null) // 出错时返回 null，继续触发 AI\n  }\n}\n\n/**\n * 获取会话的历史分析记录\n */\nexport async function getAnalysisHistory(\n  conversationId: string,\n  limit: number = 10\n): Promise<ServiceResult<StoredAnalysis[]>> {\n  const supabase = createClient()\n\n  try {\n    const { data, error } = await supabase\n      .from('conversation_analyses')\n      .select('*')\n      .eq('conversation_id', conversationId)\n      .order('created_at', { ascending: false })\n      .limit(limit)\n\n    if (error) {\n      if (error.code === '42P01') {\n        return success([])\n      }\n      return failure(createServiceError(error, '获取分析历史失败'))\n    }\n\n    const analyses = (data || []).map(d => transformDBAnalysis(d as DBAnalysis))\n    return success(analyses)\n  } catch (error) {\n    return failure(createServiceError(error, '获取分析历史失败'))\n  }\n}\n\n/**\n * 触发 AI 分析\n */\nasync function triggerAIAnalysis(\n  conversationId: string,\n  messages: Message[],\n  context?: AnalysisInput['context']\n): Promise<ServiceResult<ConversationAnalysis>> {\n  try {\n    const provider = getDefaultProvider()\n\n    const input: AnalysisInput = {\n      conversationId,\n      messages: messages.map(msg => ({\n        role: msg.isMe ? 'assistant' : 'user',\n        content: msg.content,\n        timestamp: msg.timestamp,\n        senderName: msg.senderName,\n      })),\n      context,\n    }\n\n    const analysis = await provider.analyzeConversation(input)\n    return success(analysis)\n  } catch (error) {\n    console.error('AI analysis error:', error)\n    return failure(createServiceError(error, 'AI 分析失败'))\n  }\n}\n\n/**\n * 保存分析结果到数据库\n */\nasync function saveAnalysisToDB(\n  conversationId: string,\n  idempotencyKey: string,\n  analysis: ConversationAnalysis\n): Promise<ServiceResult<void>> {\n  const supabase = createClient()\n\n  try {\n    const insertData = {\n      conversation_id: conversationId,\n      idempotency_key: idempotencyKey,\n      intent_primary: analysis.intent.primary,\n      intent_confidence: analysis.intent.confidence,\n      intent_secondary: analysis.intent.secondary || null,\n      sentiment_overall: analysis.sentiment.overall,\n      sentiment_score: analysis.sentiment.score,\n      sentiment_emotions: analysis.sentiment.emotions || null,\n      key_points: analysis.keyPoints || null,\n      risk_level: analysis.riskAssessment.level,\n      risk_factors: analysis.riskAssessment.factors || null,\n      risk_suggestions: analysis.riskAssessment.suggestions || null,\n      suggested_replies: analysis.suggestedReplies || null,\n      ai_provider: analysis.metadata.provider,\n      ai_model: analysis.metadata.model,\n      tokens_used: analysis.metadata.tokensUsed || null,\n      processing_time_ms: analysis.metadata.processingTime || null,\n    }\n\n    const { error } = await supabase\n      .from('conversation_analyses')\n      .upsert(insertData as never, { onConflict: 'idempotency_key' })\n\n    if (error) {\n      console.error('Save analysis error:', error)\n      return failure(createServiceError(error, '保存分析结果失败'))\n    }\n\n    return success(undefined)\n  } catch (error) {\n    return failure(createServiceError(error, '保存分析结果失败'))\n  }\n}\n\n/**\n * 删除会话的分析记录\n */\nexport async function deleteAnalysis(conversationId: string): Promise<ServiceResult<void>> {\n  const supabase = createClient()\n\n  try {\n    const { error } = await supabase\n      .from('conversation_analyses')\n      .delete()\n      .eq('conversation_id', conversationId)\n\n    if (error) {\n      return failure(createServiceError(error, '删除分析记录失败'))\n    }\n\n    return success(undefined)\n  } catch (error) {\n    return failure(createServiceError(error, '删除分析记录失败'))\n  }\n}\n\n// ============================================\n// 辅助函数\n// ============================================\n\nfunction transformDBAnalysis(data: DBAnalysis): StoredAnalysis {\n  return {\n    id: data.id,\n    conversationId: data.conversation_id,\n    idempotencyKey: data.idempotency_key,\n    analysis: {\n      intent: {\n        primary: data.intent_primary,\n        confidence: data.intent_confidence,\n        secondary: data.intent_secondary || undefined,\n      },\n      sentiment: {\n        overall: data.sentiment_overall,\n        score: data.sentiment_score,\n        emotions: data.sentiment_emotions || [],\n      },\n      keyPoints: (data.key_points || []) as ConversationAnalysis['keyPoints'],\n      riskAssessment: {\n        level: data.risk_level,\n        factors: data.risk_factors || [],\n        suggestions: data.risk_suggestions || [],\n      },\n      suggestedReplies: (data.suggested_replies || []) as ConversationAnalysis['suggestedReplies'],\n      metadata: {\n        provider: data.ai_provider,\n        model: data.ai_model,\n        tokensUsed: data.tokens_used || undefined,\n        processingTime: data.processing_time_ms || undefined,\n      },\n    },\n    createdAt: data.created_at,\n    updatedAt: data.updated_at,\n  }\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { ConversationList, ChatArea, RightPanel } from '@/components/messages'\nimport { useToast } from '@/components/shared/Toast'\nimport {\n  getConversationList,\n  getConversationMessages,\n  getMarketingMaterials,\n} from '@/lib/services/conversation.service'\nimport { getConversationAnalysis } from '@/lib/services/ai-analysis.service'\nimport type { Conversation, Message, MarketingMaterial, ConversationType } from '@/types/entities'\nimport type { ConversationAnalysis } from '@/lib/ai'\n\ntype RightTabKey = 'profile' | 'ai' | 'feed'\n\n/**\n * 企业微信会话中心\n * \n * 对齐 v8.0 PRD + AI Studio 设计母版：\n * - 三栏布局：会话列表 | 聊天区域 | 客户画像/AI教练/素材推送\n * - 只读模式（企微同步）\n * - AI 分析：优先读库，不存在才触发 AI\n */\nexport default function MessagesPage() {\n  const toast = useToast()\n\n  // 数据状态\n  const [conversations, setConversations] = useState<Conversation[]>([])\n  const [messages, setMessages] = useState<Message[]>([])\n  const [aiAnalysis, setAIAnalysis] = useState<ConversationAnalysis | null>(null)\n  const [materials, setMaterials] = useState<MarketingMaterial[]>([])\n  const [hasMoreMessages, setHasMoreMessages] = useState(false)\n  \n  // UI 状态\n  const [selectedId, setSelectedId] = useState<string | null>(null)\n  const [filter, setFilter] = useState<ConversationType | 'all'>('all')\n  const [searchQuery, setSearchQuery] = useState('')\n  const [rightTab, setRightTab] = useState<RightTabKey>('profile')\n  const [draft, setDraft] = useState('')\n  const [isLoading, setIsLoading] = useState(true)\n  const [isMessagesLoading, setIsMessagesLoading] = useState(false)\n  const [isAnalysisLoading, setIsAnalysisLoading] = useState(false)\n\n  // 加载会话列表\n  useEffect(() => {\n    const loadConversations = async () => {\n      setIsLoading(true)\n      const result = await getConversationList({ type: filter })\n      \n      if (result.success) {\n        setConversations(result.data.data)\n        // 默认选中第一个\n        if (result.data.data.length > 0 && !selectedId) {\n          setSelectedId(result.data.data[0].id)\n        }\n      } else {\n        toast.error('加载会话列表失败', result.error.message)\n        setConversations([])\n      }\n      setIsLoading(false)\n    }\n    loadConversations()\n  }, [filter])\n\n  // 加载选中会话的消息\n  useEffect(() => {\n    if (!selectedId) return\n    \n    const loadConversationData = async () => {\n      setIsMessagesLoading(true)\n      setAIAnalysis(null) // 清空旧的分析结果\n      \n      const [msgsResult, matsResult] = await Promise.all([\n        getConversationMessages(selectedId),\n        getMarketingMaterials(),\n      ])\n      \n      if (msgsResult.success) {\n        setMessages(msgsResult.data.data)\n        setHasMoreMessages(msgsResult.data.hasMore)\n        \n        // 消息加载成功后，异步加载 AI 分析\n        loadAIAnalysis(selectedId, msgsResult.data.data)\n      } else {\n        toast.error('加载消息失败', msgsResult.error.message)\n        setMessages([])\n      }\n      \n      if (matsResult.success) {\n        setMaterials(matsResult.data)\n      }\n      \n      setIsMessagesLoading(false)\n    }\n    loadConversationData()\n  }, [selectedId])\n\n  // 加载 AI 分析（优先读库，不存在才触发 AI）\n  const loadAIAnalysis = async (conversationId: string, msgs: Message[]) => {\n    if (msgs.length === 0) return\n    \n    setIsAnalysisLoading(true)\n    \n    // 获取选中会话的上下文\n    const selectedConv = conversations.find(c => c.id === conversationId)\n    \n    const result = await getConversationAnalysis(conversationId, msgs, {\n      context: selectedConv ? {\n        customerName: selectedConv.name,\n        customerStage: selectedConv.serviceStage,\n        customerTags: selectedConv.tags,\n      } : undefined,\n    })\n    \n    if (result.success) {\n      setAIAnalysis(result.data)\n    } else {\n      console.warn('AI analysis failed:', result.error)\n      // AI 分析失败不阻塞页面，静默处理\n    }\n    \n    setIsAnalysisLoading(false)\n  }\n\n  // 刷新 AI 分析\n  const handleRefreshAnalysis = async () => {\n    if (!selectedId || messages.length === 0) return\n    \n    setIsAnalysisLoading(true)\n    \n    const selectedConv = conversations.find(c => c.id === selectedId)\n    \n    const result = await getConversationAnalysis(selectedId, messages, {\n      forceRefresh: true,\n      context: selectedConv ? {\n        customerName: selectedConv.name,\n        customerStage: selectedConv.serviceStage,\n        customerTags: selectedConv.tags,\n      } : undefined,\n    })\n    \n    if (result.success) {\n      setAIAnalysis(result.data)\n      toast.success('分析完成', 'AI 分析已更新')\n    } else {\n      toast.error('分析失败', result.error.message)\n    }\n    \n    setIsAnalysisLoading(false)\n  }\n\n  // 加载更多消息\n  const loadMoreMessages = async () => {\n    if (!selectedId || !hasMoreMessages || isMessagesLoading) return\n    \n    const lastMessage = messages[0]\n    if (!lastMessage) return\n    \n    setIsMessagesLoading(true)\n    const result = await getConversationMessages(selectedId, { before: lastMessage.timestamp })\n    \n    if (result.success) {\n      setMessages(prev => [...result.data.data, ...prev])\n      setHasMoreMessages(result.data.hasMore)\n    }\n    setIsMessagesLoading(false)\n  }\n\n  // 筛选会话（本地搜索）\n  const filteredConversations = conversations.filter(conv => {\n    if (!searchQuery) return true\n    return conv.name.toLowerCase().includes(searchQuery.toLowerCase())\n  })\n\n  // 选中的会话\n  const selectedConversation = conversations.find(c => c.id === selectedId) || null\n\n  // 复制草稿\n  const handleCopyDraft = () => {\n    if (!draft) return\n    navigator.clipboard.writeText(draft)\n    toast.success('已复制', '内容已复制到剪贴板')\n  }\n\n  // 采纳话术\n  const handleUseScript = (script: string) => {\n    setDraft(script)\n  }\n\n  return (\n    <div className=\"flex h-[calc(100vh-64px)] overflow-hidden bg-white\">\n      {/* 左栏：会话列表 */}\n      <ConversationList\n        conversations={filteredConversations}\n        selectedId={selectedId}\n        onSelect={setSelectedId}\n        filter={filter}\n        onFilterChange={setFilter}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n      />\n\n      {/* 中栏：聊天区域 */}\n      <ChatArea\n        conversation={selectedConversation}\n        messages={messages}\n        draft={draft}\n        onDraftChange={setDraft}\n        onCopyDraft={handleCopyDraft}\n      />\n\n      {/* 右栏：客户画像/AI教练/素材推送 */}\n      <RightPanel\n        conversation={selectedConversation}\n        aiAnalysis={aiAnalysis}\n        materials={materials}\n        activeTab={rightTab}\n        onTabChange={setRightTab}\n        onUseScript={handleUseScript}\n        onRefreshAnalysis={handleRefreshAnalysis}\n        isAnalysisLoading={isAnalysisLoading}\n      />\n    </div>\n  )\n}\n","/**\n * OpenAI AI Provider\n * \n * 使用 OpenAI GPT 模型进行会话分析\n */\n\nimport type { AIProvider, AnalysisInput, ConversationAnalysis, ProviderConfig } from '../types'\n\nconst DEFAULT_MODEL = 'gpt-4o-mini'\nconst DEFAULT_MAX_TOKENS = 2000\nconst DEFAULT_TEMPERATURE = 0.3\n\nexport class OpenAIProvider implements AIProvider {\n  name = 'openai'\n  private config: ProviderConfig\n\n  constructor(config?: ProviderConfig) {\n    this.config = {\n      apiKey: config?.apiKey || process.env.OPENAI_API_KEY,\n      baseUrl: config?.baseUrl || 'https://api.openai.com/v1',\n      model: config?.model || DEFAULT_MODEL,\n      maxTokens: config?.maxTokens || DEFAULT_MAX_TOKENS,\n      temperature: config?.temperature || DEFAULT_TEMPERATURE,\n      timeout: config?.timeout || 30000,\n    }\n  }\n\n  async analyzeConversation(input: AnalysisInput): Promise<ConversationAnalysis> {\n    if (!this.config.apiKey) {\n      throw new Error('OpenAI API key not configured')\n    }\n\n    const startTime = Date.now()\n\n    // 构建 prompt\n    const systemPrompt = this.buildSystemPrompt()\n    const userPrompt = this.buildUserPrompt(input)\n\n    // 调用 OpenAI API\n    const response = await fetch(`${this.config.baseUrl}/chat/completions`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.config.apiKey}`,\n      },\n      body: JSON.stringify({\n        model: this.config.model,\n        messages: [\n          { role: 'system', content: systemPrompt },\n          { role: 'user', content: userPrompt },\n        ],\n        max_tokens: this.config.maxTokens,\n        temperature: this.config.temperature,\n        response_format: { type: 'json_object' },\n      }),\n      signal: AbortSignal.timeout(this.config.timeout!),\n    })\n\n    if (!response.ok) {\n      const error = await response.text()\n      throw new Error(`OpenAI API error: ${response.status} - ${error}`)\n    }\n\n    const data = await response.json()\n    const content = data.choices?.[0]?.message?.content\n\n    if (!content) {\n      throw new Error('Empty response from OpenAI')\n    }\n\n    // 解析 JSON 响应\n    const analysis = JSON.parse(content)\n    const processingTime = Date.now() - startTime\n\n    return {\n      intent: {\n        primary: analysis.intent?.primary || '一般咨询',\n        confidence: analysis.intent?.confidence || 0.7,\n        secondary: analysis.intent?.secondary || [],\n      },\n      sentiment: {\n        overall: analysis.sentiment?.overall || 'neutral',\n        score: analysis.sentiment?.score || 0,\n        emotions: analysis.sentiment?.emotions || [],\n      },\n      keyPoints: analysis.keyPoints || [],\n      riskAssessment: {\n        level: analysis.riskAssessment?.level || 'low',\n        factors: analysis.riskAssessment?.factors || [],\n        suggestions: analysis.riskAssessment?.suggestions || [],\n      },\n      suggestedReplies: analysis.suggestedReplies || [],\n      metadata: {\n        model: this.config.model!,\n        provider: 'openai',\n        tokensUsed: data.usage?.total_tokens,\n        processingTime,\n      },\n    }\n  }\n\n  async healthCheck(): Promise<boolean> {\n    if (!this.config.apiKey) return false\n\n    try {\n      const response = await fetch(`${this.config.baseUrl}/models`, {\n        headers: {\n          'Authorization': `Bearer ${this.config.apiKey}`,\n        },\n        signal: AbortSignal.timeout(5000),\n      })\n      return response.ok\n    } catch {\n      return false\n    }\n  }\n\n  private buildSystemPrompt(): string {\n    return `你是一个专业的客户服务分析助手，专门为留学咨询机构分析企业微信会话。\n\n你的任务是分析客户会话并提供以下信息：\n1. 意图分析：识别客户的主要和次要意图\n2. 情绪分析：评估客户的情绪状态\n3. 关键点提取：提取会话中的重要信息\n4. 风险评估：识别潜在的服务风险\n5. 建议回复：提供专业的回复建议\n\n请以 JSON 格式返回分析结果，结构如下：\n{\n  \"intent\": {\n    \"primary\": \"主要意图\",\n    \"confidence\": 0.85,\n    \"secondary\": [\"次要意图1\", \"次要意图2\"]\n  },\n  \"sentiment\": {\n    \"overall\": \"positive|neutral|negative|mixed\",\n    \"score\": 0.5,\n    \"emotions\": [\"期待\", \"焦虑\"]\n  },\n  \"keyPoints\": [\n    {\n      \"topic\": \"关键主题\",\n      \"importance\": \"high|medium|low\",\n      \"context\": \"上下文说明\"\n    }\n  ],\n  \"riskAssessment\": {\n    \"level\": \"low|medium|high|critical\",\n    \"factors\": [\"风险因素\"],\n    \"suggestions\": [\"建议措施\"]\n  },\n  \"suggestedReplies\": [\n    {\n      \"content\": \"建议回复内容\",\n      \"tone\": \"专业|亲切|安抚\",\n      \"priority\": 1\n    }\n  ]\n}\n\n注意事项：\n- 意图置信度范围 0-1\n- 情绪分数范围 -1 到 1（-1 最负面，1 最正面）\n- 回复建议要符合留学咨询的专业场景\n- 关注时间节点、费用、进度等敏感话题`\n  }\n\n  private buildUserPrompt(input: AnalysisInput): string {\n    let prompt = '请分析以下会话：\\n\\n'\n\n    // 添加上下文\n    if (input.context) {\n      prompt += '【客户背景】\\n'\n      if (input.context.customerName) prompt += `客户姓名：${input.context.customerName}\\n`\n      if (input.context.customerStage) prompt += `服务阶段：${input.context.customerStage}\\n`\n      if (input.context.customerTags?.length) prompt += `客户标签：${input.context.customerTags.join(', ')}\\n`\n      prompt += '\\n'\n    }\n\n    // 添加消息\n    prompt += '【会话内容】\\n'\n    for (const msg of input.messages) {\n      const sender = msg.senderName || (msg.role === 'user' ? '客户' : '顾问')\n      prompt += `${sender}：${msg.content}\\n`\n    }\n\n    return prompt\n  }\n}\n","/**\n * Anthropic AI Provider\n * \n * 使用 Claude 模型进行会话分析\n */\n\nimport type { AIProvider, AnalysisInput, ConversationAnalysis, ProviderConfig } from '../types'\n\nconst DEFAULT_MODEL = 'claude-3-haiku-20240307'\nconst DEFAULT_MAX_TOKENS = 2000\nconst DEFAULT_TEMPERATURE = 0.3\n\nexport class AnthropicProvider implements AIProvider {\n  name = 'anthropic'\n  private config: ProviderConfig\n\n  constructor(config?: ProviderConfig) {\n    this.config = {\n      apiKey: config?.apiKey || process.env.ANTHROPIC_API_KEY,\n      baseUrl: config?.baseUrl || 'https://api.anthropic.com/v1',\n      model: config?.model || DEFAULT_MODEL,\n      maxTokens: config?.maxTokens || DEFAULT_MAX_TOKENS,\n      temperature: config?.temperature || DEFAULT_TEMPERATURE,\n      timeout: config?.timeout || 30000,\n    }\n  }\n\n  async analyzeConversation(input: AnalysisInput): Promise<ConversationAnalysis> {\n    if (!this.config.apiKey) {\n      throw new Error('Anthropic API key not configured')\n    }\n\n    const startTime = Date.now()\n\n    // 构建 prompt\n    const systemPrompt = this.buildSystemPrompt()\n    const userPrompt = this.buildUserPrompt(input)\n\n    // 调用 Anthropic API\n    const response = await fetch(`${this.config.baseUrl}/messages`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-api-key': this.config.apiKey,\n        'anthropic-version': '2023-06-01',\n      },\n      body: JSON.stringify({\n        model: this.config.model,\n        max_tokens: this.config.maxTokens,\n        temperature: this.config.temperature,\n        system: systemPrompt,\n        messages: [\n          { role: 'user', content: userPrompt },\n        ],\n      }),\n      signal: AbortSignal.timeout(this.config.timeout!),\n    })\n\n    if (!response.ok) {\n      const error = await response.text()\n      throw new Error(`Anthropic API error: ${response.status} - ${error}`)\n    }\n\n    const data = await response.json()\n    const content = data.content?.[0]?.text\n\n    if (!content) {\n      throw new Error('Empty response from Anthropic')\n    }\n\n    // 从响应中提取 JSON\n    const jsonMatch = content.match(/\\{[\\s\\S]*\\}/)\n    if (!jsonMatch) {\n      throw new Error('Failed to parse JSON from Anthropic response')\n    }\n\n    const analysis = JSON.parse(jsonMatch[0])\n    const processingTime = Date.now() - startTime\n\n    return {\n      intent: {\n        primary: analysis.intent?.primary || '一般咨询',\n        confidence: analysis.intent?.confidence || 0.7,\n        secondary: analysis.intent?.secondary || [],\n      },\n      sentiment: {\n        overall: analysis.sentiment?.overall || 'neutral',\n        score: analysis.sentiment?.score || 0,\n        emotions: analysis.sentiment?.emotions || [],\n      },\n      keyPoints: analysis.keyPoints || [],\n      riskAssessment: {\n        level: analysis.riskAssessment?.level || 'low',\n        factors: analysis.riskAssessment?.factors || [],\n        suggestions: analysis.riskAssessment?.suggestions || [],\n      },\n      suggestedReplies: analysis.suggestedReplies || [],\n      metadata: {\n        model: this.config.model!,\n        provider: 'anthropic',\n        tokensUsed: (data.usage?.input_tokens || 0) + (data.usage?.output_tokens || 0),\n        processingTime,\n      },\n    }\n  }\n\n  async healthCheck(): Promise<boolean> {\n    if (!this.config.apiKey) return false\n\n    try {\n      // Anthropic 没有简单的健康检查端点，使用一个最小请求\n      const response = await fetch(`${this.config.baseUrl}/messages`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.config.apiKey,\n          'anthropic-version': '2023-06-01',\n        },\n        body: JSON.stringify({\n          model: this.config.model,\n          max_tokens: 10,\n          messages: [{ role: 'user', content: 'hi' }],\n        }),\n        signal: AbortSignal.timeout(5000),\n      })\n      return response.ok\n    } catch {\n      return false\n    }\n  }\n\n  private buildSystemPrompt(): string {\n    return `你是一个专业的客户服务分析助手，专门为留学咨询机构分析企业微信会话。\n\n你的任务是分析客户会话并提供以下信息：\n1. 意图分析：识别客户的主要和次要意图\n2. 情绪分析：评估客户的情绪状态\n3. 关键点提取：提取会话中的重要信息\n4. 风险评估：识别潜在的服务风险\n5. 建议回复：提供专业的回复建议\n\n请以 JSON 格式返回分析结果，结构如下：\n{\n  \"intent\": {\n    \"primary\": \"主要意图\",\n    \"confidence\": 0.85,\n    \"secondary\": [\"次要意图1\", \"次要意图2\"]\n  },\n  \"sentiment\": {\n    \"overall\": \"positive|neutral|negative|mixed\",\n    \"score\": 0.5,\n    \"emotions\": [\"期待\", \"焦虑\"]\n  },\n  \"keyPoints\": [\n    {\n      \"topic\": \"关键主题\",\n      \"importance\": \"high|medium|low\",\n      \"context\": \"上下文说明\"\n    }\n  ],\n  \"riskAssessment\": {\n    \"level\": \"low|medium|high|critical\",\n    \"factors\": [\"风险因素\"],\n    \"suggestions\": [\"建议措施\"]\n  },\n  \"suggestedReplies\": [\n    {\n      \"content\": \"建议回复内容\",\n      \"tone\": \"专业|亲切|安抚\",\n      \"priority\": 1\n    }\n  ]\n}\n\n注意事项：\n- 意图置信度范围 0-1\n- 情绪分数范围 -1 到 1（-1 最负面，1 最正面）\n- 回复建议要符合留学咨询的专业场景\n- 只返回 JSON，不要有其他文字`\n  }\n\n  private buildUserPrompt(input: AnalysisInput): string {\n    let prompt = '请分析以下会话：\\n\\n'\n\n    // 添加上下文\n    if (input.context) {\n      prompt += '【客户背景】\\n'\n      if (input.context.customerName) prompt += `客户姓名：${input.context.customerName}\\n`\n      if (input.context.customerStage) prompt += `服务阶段：${input.context.customerStage}\\n`\n      if (input.context.customerTags?.length) prompt += `客户标签：${input.context.customerTags.join(', ')}\\n`\n      prompt += '\\n'\n    }\n\n    // 添加消息\n    prompt += '【会话内容】\\n'\n    for (const msg of input.messages) {\n      const sender = msg.senderName || (msg.role === 'user' ? '客户' : '顾问')\n      prompt += `${sender}：${msg.content}\\n`\n    }\n\n    return prompt\n  }\n}\n","/**\n * Mock AI Provider\n * \n * 用于开发和测试，返回模拟的分析结果\n */\n\nimport type { AIProvider, AnalysisInput, ConversationAnalysis } from '../types'\n\nexport class MockAIProvider implements AIProvider {\n  name = 'mock'\n\n  async analyzeConversation(input: AnalysisInput): Promise<ConversationAnalysis> {\n    // 模拟网络延迟\n    await new Promise(resolve => setTimeout(resolve, 500 + Math.random() * 500))\n\n    // 根据消息内容生成模拟分析\n    const lastMessage = input.messages[input.messages.length - 1]\n    const content = lastMessage?.content || ''\n    \n    // 简单的情绪判断\n    const sentiment = this.analyzeSentiment(content)\n    const intent = this.analyzeIntent(content)\n    const keyPoints = this.extractKeyPoints(content)\n    const risk = this.assessRisk(content, sentiment)\n\n    return {\n      intent: {\n        primary: intent.primary,\n        confidence: intent.confidence,\n        secondary: intent.secondary,\n      },\n      sentiment: {\n        overall: sentiment.overall,\n        score: sentiment.score,\n        emotions: sentiment.emotions,\n      },\n      keyPoints,\n      riskAssessment: {\n        level: risk.level,\n        factors: risk.factors,\n        suggestions: risk.suggestions,\n      },\n      suggestedReplies: this.generateSuggestedReplies(intent.primary, sentiment.overall),\n      metadata: {\n        model: 'mock-v1',\n        provider: 'mock',\n        tokensUsed: Math.floor(Math.random() * 500) + 100,\n        processingTime: Math.floor(Math.random() * 500) + 200,\n      },\n    }\n  }\n\n  async healthCheck(): Promise<boolean> {\n    return true\n  }\n\n  // ============================================\n  // 私有辅助方法\n  // ============================================\n\n  private analyzeSentiment(content: string): {\n    overall: 'positive' | 'neutral' | 'negative' | 'mixed'\n    score: number\n    emotions: string[]\n  } {\n    const lowerContent = content.toLowerCase()\n    \n    // 正面关键词\n    const positiveKeywords = ['谢谢', '感谢', '太好了', '满意', '期待', '开心', '喜欢', '棒', '优秀']\n    // 负面关键词\n    const negativeKeywords = ['不满', '失望', '担心', '焦虑', '着急', '问题', '投诉', '退', '差']\n    // 紧急关键词\n    const urgentKeywords = ['急', '马上', '立刻', '赶紧', '截止', '来不及']\n\n    const positiveCount = positiveKeywords.filter(k => lowerContent.includes(k)).length\n    const negativeCount = negativeKeywords.filter(k => lowerContent.includes(k)).length\n    const urgentCount = urgentKeywords.filter(k => lowerContent.includes(k)).length\n\n    const emotions: string[] = []\n    if (positiveCount > 0) emotions.push('积极', '期待')\n    if (negativeCount > 0) emotions.push('担忧', '不满')\n    if (urgentCount > 0) emotions.push('紧迫', '焦虑')\n    if (emotions.length === 0) emotions.push('平静')\n\n    let overall: 'positive' | 'neutral' | 'negative' | 'mixed' = 'neutral'\n    let score = 0\n\n    if (positiveCount > negativeCount) {\n      overall = 'positive'\n      score = Math.min(0.3 + positiveCount * 0.2, 1)\n    } else if (negativeCount > positiveCount) {\n      overall = 'negative'\n      score = Math.max(-0.3 - negativeCount * 0.2, -1)\n    } else if (positiveCount > 0 && negativeCount > 0) {\n      overall = 'mixed'\n      score = 0\n    }\n\n    return { overall, score, emotions }\n  }\n\n  private analyzeIntent(content: string): {\n    primary: string\n    confidence: number\n    secondary: string[]\n  } {\n    const lowerContent = content.toLowerCase()\n\n    // 意图识别规则\n    const intents = [\n      { keywords: ['截止', '日期', '时间', '什么时候', '多久'], intent: '询问时间节点', confidence: 0.85 },\n      { keywords: ['费用', '价格', '多少钱', '收费', '预算'], intent: '咨询费用', confidence: 0.9 },\n      { keywords: ['进度', '怎么样', '到哪了', '状态'], intent: '询问进度', confidence: 0.85 },\n      { keywords: ['文书', '申请', '材料', '资料'], intent: '询问申请材料', confidence: 0.8 },\n      { keywords: ['推荐', '建议', '哪个好', '怎么选'], intent: '寻求建议', confidence: 0.8 },\n      { keywords: ['问题', '不对', '错了', '修改'], intent: '反馈问题', confidence: 0.85 },\n      { keywords: ['谢谢', '感谢', '辛苦'], intent: '表达感谢', confidence: 0.9 },\n      { keywords: ['你好', '在吗', '请问'], intent: '打招呼', confidence: 0.95 },\n    ]\n\n    let primary = '一般咨询'\n    let confidence = 0.6\n    const secondary: string[] = []\n\n    for (const rule of intents) {\n      const matchCount = rule.keywords.filter(k => lowerContent.includes(k)).length\n      if (matchCount > 0) {\n        if (rule.confidence > confidence) {\n          if (primary !== '一般咨询') secondary.push(primary)\n          primary = rule.intent\n          confidence = rule.confidence\n        } else {\n          secondary.push(rule.intent)\n        }\n      }\n    }\n\n    return { primary, confidence, secondary: secondary.slice(0, 2) }\n  }\n\n  private extractKeyPoints(content: string): ConversationAnalysis['keyPoints'] {\n    const keyPoints: ConversationAnalysis['keyPoints'] = []\n\n    // 时间相关\n    if (/截止|deadline|ddl|\\d+月|\\d+号/i.test(content)) {\n      keyPoints.push({\n        topic: '时间节点',\n        importance: 'high',\n        context: '客户关注具体时间安排',\n      })\n    }\n\n    // 费用相关\n    if (/费用|价格|收费|钱|预算/i.test(content)) {\n      keyPoints.push({\n        topic: '费用咨询',\n        importance: 'high',\n        context: '客户关注服务费用',\n      })\n    }\n\n    // 进度相关\n    if (/进度|状态|怎么样|到哪/i.test(content)) {\n      keyPoints.push({\n        topic: '进度跟进',\n        importance: 'medium',\n        context: '客户关心当前进展',\n      })\n    }\n\n    // 文书相关\n    if (/文书|essay|ps|cv|推荐信/i.test(content)) {\n      keyPoints.push({\n        topic: '文书材料',\n        importance: 'high',\n        context: '涉及申请核心材料',\n      })\n    }\n\n    // 默认关键点\n    if (keyPoints.length === 0) {\n      keyPoints.push({\n        topic: '日常沟通',\n        importance: 'low',\n        context: '常规客户互动',\n      })\n    }\n\n    return keyPoints\n  }\n\n  private assessRisk(\n    content: string,\n    sentiment: { overall: string; score: number }\n  ): ConversationAnalysis['riskAssessment'] {\n    const factors: string[] = []\n    const suggestions: string[] = []\n    let level: 'low' | 'medium' | 'high' | 'critical' = 'low'\n\n    // 负面情绪\n    if (sentiment.overall === 'negative') {\n      factors.push('客户情绪偏负面')\n      suggestions.push('注意安抚客户情绪')\n      level = 'medium'\n    }\n\n    // 紧急关键词\n    if (/急|马上|立刻|来不及/i.test(content)) {\n      factors.push('客户表达紧迫感')\n      suggestions.push('优先处理，及时响应')\n      level = level === 'medium' ? 'high' : 'medium'\n    }\n\n    // 投诉关键词\n    if (/投诉|不满|差评|退款/i.test(content)) {\n      factors.push('潜在投诉风险')\n      suggestions.push('升级处理，主管介入')\n      level = 'high'\n    }\n\n    // 流失风险\n    if (/考虑|其他|别家|不想/i.test(content)) {\n      factors.push('客户可能流失')\n      suggestions.push('了解原因，挽留客户')\n      level = level === 'low' ? 'medium' : level\n    }\n\n    if (factors.length === 0) {\n      factors.push('无明显风险因素')\n      suggestions.push('保持正常服务节奏')\n    }\n\n    return { level, factors, suggestions }\n  }\n\n  private generateSuggestedReplies(\n    intent: string,\n    sentiment: string\n  ): ConversationAnalysis['suggestedReplies'] {\n    const replies: ConversationAnalysis['suggestedReplies'] = []\n\n    // 根据意图生成建议回复\n    switch (intent) {\n      case '询问时间节点':\n        replies.push({\n          content: '您好！关于时间安排，让我帮您确认一下具体的截止日期，稍后给您详细说明。',\n          tone: '专业',\n          priority: 1,\n        })\n        break\n      case '询问进度':\n        replies.push({\n          content: '您好！目前您的申请进度正在顺利推进中，我来给您详细汇报一下当前状态。',\n          tone: '亲切',\n          priority: 1,\n        })\n        break\n      case '咨询费用':\n        replies.push({\n          content: '您好！感谢您的咨询。关于费用方面，我来给您详细介绍一下我们的服务套餐和价格。',\n          tone: '专业',\n          priority: 1,\n        })\n        break\n      case '反馈问题':\n        replies.push({\n          content: '非常感谢您的反馈！我已经记录下您提到的问题，会尽快处理并给您回复。',\n          tone: '诚恳',\n          priority: 1,\n        })\n        break\n      default:\n        replies.push({\n          content: '您好！感谢您的消息，我来为您解答。',\n          tone: '亲切',\n          priority: 1,\n        })\n    }\n\n    // 如果情绪负面，添加安抚性回复\n    if (sentiment === 'negative') {\n      replies.push({\n        content: '非常理解您的心情，我们一定会尽全力为您解决。请放心，您的问题我们会优先处理。',\n        tone: '安抚',\n        priority: 2,\n      })\n    }\n\n    return replies\n  }\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Minus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/minus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Minus = createLucideIcon('Minus', [['path', { d: 'M5 12h14', key: '1ays0h' }]]);\n\nexport default Minus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name EllipsisVertical\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxIiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iNSIgcj0iMSIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjE5IiByPSIxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/ellipsis-vertical\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst EllipsisVertical = createLucideIcon('EllipsisVertical', [\n  ['circle', { cx: '12', cy: '12', r: '1', key: '41hilf' }],\n  ['circle', { cx: '12', cy: '5', r: '1', key: 'gxeob9' }],\n  ['circle', { cx: '12', cy: '19', r: '1', key: 'lyex9k' }],\n]);\n\nexport default EllipsisVertical;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Copy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHg9IjgiIHk9IjgiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNNCAxNmMtMS4xIDAtMi0uOS0yLTJWNGMwLTEuMS45LTIgMi0yaDEwYzEuMSAwIDIgLjkgMiAyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Copy = createLucideIcon('Copy', [\n  ['rect', { width: '14', height: '14', x: '8', y: '8', rx: '2', ry: '2', key: '17jyea' }],\n  ['path', { d: 'M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2', key: 'zix9uf' }],\n]);\n\nexport default Copy;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Sparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOS45MzcgMTUuNUEyIDIgMCAwIDAgOC41IDE0LjA2M2wtNi4xMzUtMS41ODJhLjUuNSAwIDAgMSAwLS45NjJMOC41IDkuOTM2QTIgMiAwIDAgMCA5LjkzNyA4LjVsMS41ODItNi4xMzVhLjUuNSAwIDAgMSAuOTYzIDBMMTQuMDYzIDguNUEyIDIgMCAwIDAgMTUuNSA5LjkzN2w2LjEzNSAxLjU4MWEuNS41IDAgMCAxIDAgLjk2NEwxNS41IDE0LjA2M2EyIDIgMCAwIDAtMS40MzcgMS40MzdsLTEuNTgyIDYuMTM1YS41LjUgMCAwIDEtLjk2MyAweiIgLz4KICA8cGF0aCBkPSJNMjAgM3Y0IiAvPgogIDxwYXRoIGQ9Ik0yMiA1aC00IiAvPgogIDxwYXRoIGQ9Ik00IDE3djIiIC8+CiAgPHBhdGggZD0iTTUgMThIMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Sparkles = createLucideIcon('Sparkles', [\n  [\n    'path',\n    {\n      d: 'M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z',\n      key: '4pj2yx',\n    },\n  ],\n  ['path', { d: 'M20 3v4', key: '1olli1' }],\n  ['path', { d: 'M22 5h-4', key: '1gvqau' }],\n  ['path', { d: 'M4 17v2', key: 'vumght' }],\n  ['path', { d: 'M5 18H3', key: 'zchphs' }],\n]);\n\nexport default Sparkles;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CircleUser\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIiAvPgogIDxwYXRoIGQ9Ik03IDIwLjY2MlYxOWEyIDIgMCAwIDEgMi0yaDZhMiAyIDAgMCAxIDIgMnYxLjY2MiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/circle-user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleUser = createLucideIcon('CircleUser', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['circle', { cx: '12', cy: '10', r: '3', key: 'ilqhr7' }],\n  ['path', { d: 'M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662', key: '154egf' }],\n]);\n\nexport default CircleUser;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BrainCircuit\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNWEzIDMgMCAxIDAtNS45OTcuMTI1IDQgNCAwIDAgMC0yLjUyNiA1Ljc3IDQgNCAwIDAgMCAuNTU2IDYuNTg4QTQgNCAwIDEgMCAxMiAxOFoiIC8+CiAgPHBhdGggZD0iTTkgMTNhNC41IDQuNSAwIDAgMCAzLTQiIC8+CiAgPHBhdGggZD0iTTYuMDAzIDUuMTI1QTMgMyAwIDAgMCA2LjQwMSA2LjUiIC8+CiAgPHBhdGggZD0iTTMuNDc3IDEwLjg5NmE0IDQgMCAwIDEgLjU4NS0uMzk2IiAvPgogIDxwYXRoIGQ9Ik02IDE4YTQgNCAwIDAgMS0xLjk2Ny0uNTE2IiAvPgogIDxwYXRoIGQ9Ik0xMiAxM2g0IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOGg2YTIgMiAwIDAgMSAyIDJ2MSIgLz4KICA8cGF0aCBkPSJNMTIgOGg4IiAvPgogIDxwYXRoIGQ9Ik0xNiA4VjVhMiAyIDAgMCAxIDItMiIgLz4KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjEzIiByPSIuNSIgLz4KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjMiIHI9Ii41IiAvPgogIDxjaXJjbGUgY3g9IjIwIiBjeT0iMjEiIHI9Ii41IiAvPgogIDxjaXJjbGUgY3g9IjIwIiBjeT0iOCIgcj0iLjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/brain-circuit\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BrainCircuit = createLucideIcon('BrainCircuit', [\n  [\n    'path',\n    {\n      d: 'M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z',\n      key: 'l5xja',\n    },\n  ],\n  ['path', { d: 'M9 13a4.5 4.5 0 0 0 3-4', key: '10igwf' }],\n  ['path', { d: 'M6.003 5.125A3 3 0 0 0 6.401 6.5', key: '105sqy' }],\n  ['path', { d: 'M3.477 10.896a4 4 0 0 1 .585-.396', key: 'ql3yin' }],\n  ['path', { d: 'M6 18a4 4 0 0 1-1.967-.516', key: '2e4loj' }],\n  ['path', { d: 'M12 13h4', key: '1ku699' }],\n  ['path', { d: 'M12 18h6a2 2 0 0 1 2 2v1', key: '105ag5' }],\n  ['path', { d: 'M12 8h8', key: '1lhi5i' }],\n  ['path', { d: 'M16 8V5a2 2 0 0 1 2-2', key: 'u6izg6' }],\n  ['circle', { cx: '16', cy: '13', r: '.5', key: 'ry7gng' }],\n  ['circle', { cx: '18', cy: '3', r: '.5', key: '1aiba7' }],\n  ['circle', { cx: '20', cy: '21', r: '.5', key: 'yhc1fs' }],\n  ['circle', { cx: '20', cy: '8', r: '.5', key: '1e43v0' }],\n]);\n\nexport default BrainCircuit;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNTM2IDIxLjY4NmEuNS41IDAgMCAwIC45MzctLjAyNGw2LjUtMTlhLjQ5Ni40OTYgMCAwIDAtLjYzNS0uNjM1bC0xOSA2LjVhLjUuNSAwIDAgMC0uMDI0LjkzN2w3LjkzIDMuMThhMiAyIDAgMCAxIDEuMTEyIDEuMTF6IiAvPgogIDxwYXRoIGQ9Im0yMS44NTQgMi4xNDctMTAuOTQgMTAuOTM5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('Send', [\n  [\n    'path',\n    {\n      d: 'M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z',\n      key: '1ffxy3',\n    },\n  ],\n  ['path', { d: 'm21.854 2.147-10.94 10.939', key: '12cjpa' }],\n]);\n\nexport default Send;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Youtube\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi41IDE3YTI0LjEyIDI0LjEyIDAgMCAxIDAtMTAgMiAyIDAgMCAxIDEuNC0xLjQgNDkuNTYgNDkuNTYgMCAwIDEgMTYuMiAwQTIgMiAwIDAgMSAyMS41IDdhMjQuMTIgMjQuMTIgMCAwIDEgMCAxMCAyIDIgMCAwIDEtMS40IDEuNCA0OS41NSA0OS41NSAwIDAgMS0xNi4yIDBBMiAyIDAgMCAxIDIuNSAxNyIgLz4KICA8cGF0aCBkPSJtMTAgMTUgNS0zLTUtM3oiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/youtube\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n * @deprecated Brand icons have been deprecated and are due to be removed, please refer to https://github.com/lucide-icons/lucide/issues/670. We recommend using https://simpleicons.org/?q=youtube instead. This icon will be removed in v1.0\n */\nconst Youtube = createLucideIcon('Youtube', [\n  [\n    'path',\n    {\n      d: 'M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17',\n      key: '1q2vi4',\n    },\n  ],\n  ['path', { d: 'm10 15 5-3-5-3z', key: '1jp15x' }],\n]);\n\nexport default Youtube;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiAxNyAxMy41IDguNSA4LjUgMTMuNSAyIDciIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTYgMTcgMjIgMTcgMjIgMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trending-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingDown = createLucideIcon('TrendingDown', [\n  ['polyline', { points: '22 17 13.5 8.5 8.5 13.5 2 7', key: '1r2t7k' }],\n  ['polyline', { points: '16 17 22 17 22 11', key: '11uiuu' }],\n]);\n\nexport default TrendingDown;\n","/**\n * AI 模块入口\n * \n * 导出类型、Provider 和工具函数\n */\n\n// 导出类型\nexport type {\n  ConversationAnalysis,\n  AnalysisInput,\n  AIProvider,\n  ProviderConfig,\n} from './types'\n\nexport {\n  registerProvider,\n  getProvider,\n  getDefaultProvider,\n  listProviders,\n} from './types'\n\n// 导入 Providers\nimport { MockAIProvider } from './providers/mock'\nimport { OpenAIProvider } from './providers/openai'\nimport { AnthropicProvider } from './providers/anthropic'\nimport { registerProvider } from './types'\n\n// 注册所有 Providers\nregisterProvider('mock', () => new MockAIProvider())\nregisterProvider('openai', () => new OpenAIProvider())\nregisterProvider('anthropic', () => new AnthropicProvider())\n\n// 导出 Provider 类（用于自定义配置）\nexport { MockAIProvider } from './providers/mock'\nexport { OpenAIProvider } from './providers/openai'\nexport { AnthropicProvider } from './providers/anthropic'\n","/**\n * AI Provider 接口定义\n * \n * 支持可插拔的 AI 服务提供商\n * 当前支持：OpenAI, Anthropic, Azure OpenAI, Mock\n */\n\n// ============================================\n// 类型定义\n// ============================================\n\n/**\n * 会话分析结果\n */\nexport interface ConversationAnalysis {\n  // 意图分析\n  intent: {\n    primary: string           // 主要意图\n    confidence: number        // 置信度 0-1\n    secondary?: string[]      // 次要意图\n  }\n  \n  // 情绪分析\n  sentiment: {\n    overall: 'positive' | 'neutral' | 'negative' | 'mixed'\n    score: number             // -1 到 1\n    emotions: string[]        // 具体情绪标签：焦虑、期待、不满等\n  }\n  \n  // 关键点提取\n  keyPoints: {\n    topic: string             // 关键主题\n    importance: 'high' | 'medium' | 'low'\n    context?: string          // 上下文说明\n  }[]\n  \n  // 风险评估\n  riskAssessment: {\n    level: 'low' | 'medium' | 'high' | 'critical'\n    factors: string[]         // 风险因素\n    suggestions: string[]     // 建议措施\n  }\n  \n  // 建议回复\n  suggestedReplies: {\n    content: string\n    tone: string              // 语气：专业、亲切、正式等\n    priority: number          // 优先级 1-3\n  }[]\n  \n  // 元数据\n  metadata: {\n    model: string             // 使用的模型\n    provider: string          // 提供商\n    tokensUsed?: number       // 消耗的 token 数\n    processingTime?: number   // 处理时间 ms\n  }\n}\n\n/**\n * 分析请求输入\n */\nexport interface AnalysisInput {\n  conversationId: string\n  messages: {\n    role: 'user' | 'assistant' | 'system'\n    content: string\n    timestamp?: string\n    senderName?: string\n  }[]\n  context?: {\n    customerName?: string\n    customerStage?: string\n    customerTags?: string[]\n    previousAnalysis?: Partial<ConversationAnalysis>\n  }\n}\n\n/**\n * AI Provider 接口\n */\nexport interface AIProvider {\n  name: string\n  \n  /**\n   * 分析会话\n   */\n  analyzeConversation(input: AnalysisInput): Promise<ConversationAnalysis>\n  \n  /**\n   * 检查服务可用性\n   */\n  healthCheck(): Promise<boolean>\n}\n\n/**\n * Provider 配置\n */\nexport interface ProviderConfig {\n  apiKey?: string\n  baseUrl?: string\n  model?: string\n  maxTokens?: number\n  temperature?: number\n  timeout?: number\n}\n\n// ============================================\n// Provider 注册表\n// ============================================\n\nconst providerRegistry = new Map<string, () => AIProvider>()\n\n/**\n * 注册 Provider\n */\nexport function registerProvider(name: string, factory: () => AIProvider): void {\n  providerRegistry.set(name, factory)\n}\n\n/**\n * 获取 Provider\n */\nexport function getProvider(name: string): AIProvider | null {\n  const factory = providerRegistry.get(name)\n  return factory ? factory() : null\n}\n\n/**\n * 获取默认 Provider\n */\nexport function getDefaultProvider(): AIProvider {\n  // 优先级：环境变量配置 > OpenAI > Anthropic > Mock\n  const preferredProvider = process.env.NEXT_PUBLIC_AI_PROVIDER || 'openai'\n  \n  const provider = getProvider(preferredProvider)\n  if (provider) return provider\n  \n  // 回退到 Mock\n  const mockProvider = getProvider('mock')\n  if (mockProvider) return mockProvider\n  \n  throw new Error('No AI provider available')\n}\n\n/**\n * 列出所有注册的 Provider\n */\nexport function listProviders(): string[] {\n  return Array.from(providerRegistry.keys())\n}\n"],"names":[],"mappings":"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","ignoreList":[8,9,10,11,12,13,14,15,16]}